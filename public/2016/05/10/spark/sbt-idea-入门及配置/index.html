<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>sbt-idea-入门及配置 | 杜龙少的博客</title>
  <meta name="author" content="杜龙少">
  
  <meta name="description" content="杜龙少的博客">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="sbt-idea-入门及配置"/>
  <meta property="og:site_name" content="杜龙少的博客"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="杜龙少的博客" type="application/atom+xml">
  
  
    <link href="/favorite.ico" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/bootstrap.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">杜龙少的博客</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header page-header-inverse ">		
			<h1 class="title title-inverse "> sbt-idea-入门及配置</h1>
		</div>		
	






<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h1 id="Java-环境配置"><a href="#Java-环境配置" class="headerlink" title="Java 环境配置"></a>Java 环境配置</h1><p>这个就不多说了，这是前提条件，请自行安装后配置正确，如果不清楚请自行搜索 <strong>java 环境变量配置</strong> 相关问题。</p>
<h1 id="Scala-配置"><a href="#Scala-配置" class="headerlink" title="Scala 配置"></a>Scala 配置</h1><p>首先要要配置 scala 环境。从<a href="http://scala-lang.org/" target="_blank" rel="external">官方</a>地址下载，这里我们使用scala2.10.6版本，所以<a href="http://scala-lang.org/download/2.10.6.html" target="_blank" rel="external">从这里下载</a>对应的平台版本。Windows请下载 <a href="http://downloads.lightbend.com/scala/2.10.6/scala-2.10.6.zip" target="_blank" rel="external">scala-2.10.6.zip</a> ，MacOS和Linux请下载 <a href="http://downloads.lightbend.com/scala/2.10.6/scala-2.10.6.tgz" target="_blank" rel="external">scala-2.10.6.tgz</a> 。</p>
<p>下载完成后，解压到一个目录，然后配置环境变量 <code>SCALA_HOME</code> ，把scala的解压后的绝对路径配置到 <code>SCALA_HOME</code> ，然后增加 <code>PATH</code> 的配置。以下以 WIndows 和 Linux 举例来说，假如这里解压后得到的文件夹为 <code>scala-2.10.6</code>。</p>
<h2 id="Windows-环境"><a href="#Windows-环境" class="headerlink" title="Windows 环境"></a>Windows 环境</h2><p>假如 <code>scala-2.10.6</code> 文件夹放在了 <code>C:\</code>目录下，那么新增 <code>SCALA_HOME</code> 的值为 <code>C:\scala-2.10.6</code> ，然后找到 <code>PATH</code> 这个环境变量， 在已有的值后面添加 <code>;%SCALA_HOME%\bin</code> （注意前面的分号），重新打开一个新的命令行窗口即可操作。关于windows环境变量的其他说明情自行补脑，这里就不多啰嗦了。</p>
<h2 id="Linux-和-Mac-环境"><a href="#Linux-和-Mac-环境" class="headerlink" title="Linux 和 Mac 环境"></a>Linux 和 Mac 环境</h2><p>这里假定我们 <code>scala-2.10.6</code> 的 scala 目录存放在 <code>/usr/local/</code> 下，绝对路径就是 <code>/usr/local/scala-2.10.6</code> 。</p>
<h3 id="Bash-环境"><a href="#Bash-环境" class="headerlink" title="Bash 环境"></a>Bash 环境</h3><p>bash 环境下可以修改 <code>~/.bashrc</code> 或者 <code>/etc/profile</code> 文件，添加一下内容：             </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SCALA_HOME=/usr/<span class="built_in">local</span>/scala-2.10.6</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$SCALA_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> SCALA_HOME PATH</span><br></pre></td></tr></table></figure>
<p>然后执行 <code>source ~/.bashrc</code> 或者 <code>source /etc/profile</code> 即可。</p>
<h3 id="Zsh-环境"><a href="#Zsh-环境" class="headerlink" title="Zsh 环境"></a>Zsh 环境</h3><p>如果你的终端bash用的是 zsh ，那么需要在 <code>~/.zshrc</code> 文件中增加上述内容，然后执行 <code>source ~/.zshrc</code> 即可。</p>
<h1 id="Sbt-配置"><a href="#Sbt-配置" class="headerlink" title="Sbt 配置"></a>Sbt 配置</h1><p><a href="http://www.scala-sbt.org/" target="_blank" rel="external">官方地址</a>，<a href="http://www.scala-sbt.org/download.html" target="_blank" rel="external">从这里下载</a>，如果是MacOS的话，可以依照这里提示的方法进行快捷安装，如果是其他平台或者想手动配置，<a href="https://dl.bintray.com/sbt/native-packages/sbt/0.13.11/sbt-0.13.11.zip" target="_blank" rel="external">点击这里直接下载</a>即可。</p>
<p>下载完成并解压，得到文件夹 <code>sbt</code>。</p>
<h2 id="Windows-环境-1"><a href="#Windows-环境-1" class="headerlink" title="Windows 环境"></a>Windows 环境</h2><p>假如我们将 <code>sbt</code> 文件夹放到了 <code>C:\</code>目录下。新增环境变量 <code>SBT_HOME</code> 值为 <code>C:\sbt</code>， 在 <code>PATH</code> 变量值后面添加 <code>;%SBT_HOME%\bin</code>，重新打开一个新的命令行窗口即可。</p>
<h2 id="Linux-或者-Mac-环境"><a href="#Linux-或者-Mac-环境" class="headerlink" title="Linux 或者 Mac 环境"></a>Linux 或者 Mac 环境</h2><p>这里假定我们将 <code>sbt</code> 目录放在了 <code>/usr/local/</code> 目录下。同上面配置 scala 环境变量一样。</p>
<h3 id="Bash-环境-1"><a href="#Bash-环境-1" class="headerlink" title="Bash 环境"></a>Bash 环境</h3><p>编辑 <code>~/.bashrc</code> 或者 <code>/etc/profile</code> ，新增以下内容:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SBT_HOME=/usr/<span class="built_in">local</span>/sbt</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$SBT_HOEM</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> SBT_HOME PATH</span><br></pre></td></tr></table></figure>
<p>然后执行 <code>source ~/.bashrc</code> 或者 <code>source /etc/profile</code> 即可生效。</p>
<h3 id="Zsh-环境-1"><a href="#Zsh-环境-1" class="headerlink" title="Zsh 环境"></a>Zsh 环境</h3><p>编辑 <code>~/.zshrc</code>， 添加上面的内容并保存后，执行 <code>source ~/.zshrc</code> 即可生效。</p>
<h2 id="示例程序"><a href="#示例程序" class="headerlink" title="示例程序"></a>示例程序</h2><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><p>在随意一个地方创建一个文件夹，名字为 <code>spark-sbt-demo</code> ，下面是目录结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spark-sbt-demo                                                                                                                                                                         </span><br><span class="line">├── build.sbt</span><br><span class="line">├── project</span><br><span class="line">│   ├── build.properties</span><br><span class="line">│   └── plugins.sbt</span><br><span class="line">└── src</span><br><span class="line">    ├── main</span><br><span class="line">        ├── scala</span><br><span class="line">           └── WordCount.scala</span><br></pre></td></tr></table></figure>
<p>build.sbt 文件中添加如下内容（注意每行要用空行隔开）：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">name := <span class="string">"spark-sbt-demo"</span></span><br><span class="line"></span><br><span class="line">version := <span class="string">"1.0"</span></span><br><span class="line"></span><br><span class="line">scalaVersion := <span class="string">"2.10.6"</span></span><br><span class="line"></span><br><span class="line">organization := <span class="string">"spark.demo"</span></span><br><span class="line"></span><br><span class="line">version := <span class="string">"1.0.0-SNAPSHOT"</span></span><br><span class="line"></span><br><span class="line">libraryDependencies += <span class="string">"org.apache.spark"</span> % <span class="string">"spark-core_2.10"</span> % <span class="string">"1.6.1"</span> % <span class="string">"provided"</span></span><br></pre></td></tr></table></figure>
<p>WordCount.scala 文件内容：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">  * Created by sdvdxl on 16/5/11.</span><br><span class="line">  */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">WordCount</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setAppName(<span class="string">"spark-sbt-demo"</span>).setMaster(<span class="string">"local[*]"</span>)</span><br><span class="line">    <span class="keyword">val</span> sc  = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line">    sc.textFile(<span class="string">"src/main/scala/WordCount.scala"</span>).flatMap(_.split(<span class="string">" "</span>)).map(word=&gt;(word,<span class="number">1</span>)).reduceByKey(_+_).foreach(println)</span><br><span class="line">    sc.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>build.properties 文件内容 ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sbt.version = 0.13.11</span><br></pre></td></tr></table></figure>
<p>plugins.sbt 文件先保持为空。</p>
<p>至此，我们已经创建了一个 sbt 机构的项目。</p>
<p>接下来会说明使用sbt下载依赖，使用 idea 创建 sbt 项目，在idea中如何运行sbt管理的 spark app。</p>
<h2 id="Sbt-的基本使用"><a href="#Sbt-的基本使用" class="headerlink" title="Sbt 的基本使用"></a>Sbt 的基本使用</h2><p>上面我们创建了一个用 sbt 管理的 spark app 项目，如果想要提交到spark中运行，那么需要打包成jar包，好在 sbt 本身或者插件提供了这样的功能。</p>
<h3 id="应用打包"><a href="#应用打包" class="headerlink" title="应用打包"></a>应用打包</h3><p>打开命令行，切换到该项目目录下，然后输入 <code>sbt</code> 之后，进入 sbt 的交互中，然后输入 <code>package</code> ，开始打包，最后如果看到类似</p>
<blockquote>
<p>[info] Done packaging.<br>  [success] Total time: 11 s, completed 2016-5-11 12:32:09</p>
</blockquote>
<p>字样，那么说明打包成功，打成的 jar 包在上面的日志中可以找到。</p>
<h3 id="第三方-jar-统一打包"><a href="#第三方-jar-统一打包" class="headerlink" title="第三方 jar 统一打包"></a>第三方 jar 统一打包</h3><p>在写应用的时候，我们不只是用到 <code>spark</code> 自身的 jar 包，还会用到好多其他第三方类库，那么，在提交应用到 spark 运行的时候，这些第三方依赖也需要一并提交上去，否则会出现找不到类的问题。如果依赖少的话，直接将这些 jar 包直接一个一个提交上去也没问题，但是一旦依赖了大量的类库，这种方法显然是低效费力的，那么怎么才能将这些所有的第三方依赖打成一个 jar 包呢？</p>
<p>sbt 本身没有提供这样的功能，但是我们可以依靠相应的插件完成此操作。记得上面有个文件内容留空的 <code>plugins.sbt</code> 文件吗？这个文件中可以配置我们想要完成特定功能的插件，现在我们在其中添加如下内容：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addSbtPlugin(<span class="string">"com.eed3si9n"</span> % <span class="string">"sbt-assembly"</span> % <span class="string">"0.14.2"</span>)</span><br></pre></td></tr></table></figure>
<p>然后重新 进入 sbt 交互式环境，输入 <code>assemblyPackageDependency</code> 回车，稍后将看到类似如下输出：    </p>
<blockquote>
<p>[info] Done packaging.<br>  [success] Total time: 41 s, completed 2016-5-11 13:36:37</p>
</blockquote>
<p>这样就成功的将所有依赖的第三方类库打包到一个 jar 包中了，具体打包的文件可以在上面的日志中看到。</p>
<h2 id="使用-idea-创建-sbt-项目"><a href="#使用-idea-创建-sbt-项目" class="headerlink" title="使用 idea 创建 sbt 项目"></a>使用 idea 创建 sbt 项目</h2><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>使用 idea 创建 sbt 项目需要安装 <code>scala</code> 和 <code>sbt</code> 插件。<br>打开idea的首选项，然后找到 <code>Plugins</code> ，点击 <code>Browser repositores...</code> 按钮，输入 <code>scala</code> 搜索，然后找到 <code>scala</code> 和 <code>sbt</code> 的插件进行安装，如下图所示：<br><img src="/images/scala/scala-sbt-plugin.png" alt="scala-sbt-plugins"><br>安装完成后重启idea。</p>
<h3 id="创建-sbt-项目"><a href="#创建-sbt-项目" class="headerlink" title="创建 sbt 项目"></a>创建 sbt 项目</h3><p>File -&gt; New -&gt; Project… 打开项目创建向导：<br><img src="/images/scala/sbt-project-1.png" alt="创建sbt项目"><br>创建完成后，等待idea刷新项目，目录结构大体如下（project/project 和 target相关没有列出）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">spark-sbt-demo                                                                                                                                                                </span><br><span class="line">├── build.sbt</span><br><span class="line">├── project</span><br><span class="line">│   ├── build.properties</span><br><span class="line">│   └── plugins.sbt</span><br><span class="line">└── src</span><br><span class="line">    ├── main</span><br><span class="line">    │   ├── java</span><br><span class="line">    │   ├── resources</span><br><span class="line">    │   ├── scala</span><br><span class="line">    │   └── scala-2.11</span><br><span class="line">    └── test</span><br><span class="line">        ├── java</span><br><span class="line">        ├── resources</span><br><span class="line">        ├── scala</span><br><span class="line">        └── scala-2.11</span><br></pre></td></tr></table></figure>
<ul>
<li><code>plugins.sbt</code> 文件放置插件配置</li>
<li><code>build.sbt</code> 是整体的项目配置信息</li>
<li><code>build.properties</code> 可以设置 sbt 版本</li>
<li><code>java</code> 目录存放 java 文件</li>
<li><code>scala</code> 目录存放 scala 文件</li>
<li><code>resources</code> 目录用来存放配置文件</li>
<li><code>test</code> 相关目录用来存放测试相关文件<h2 id="在-idea-中-运行-spark-app"><a href="#在-idea-中-运行-spark-app" class="headerlink" title="在 idea 中 运行 spark app"></a>在 idea 中 运行 spark app</h2>上面我们介绍了如何使用 idea 项目向导创建一个 sbt 项目，现在我们来说一下如何在 idea 中直接运行 sbt 构建的 spark app。</li>
</ul>
<p>这里我们使用一开始我们创建的那个项目，使用 idea 导入功能，File -&gt; Open 找到项目目录打开即可。<br>在 <code>WordCount.scala</code> 文件中右键，选择 <code>Run WordCount</code> ，开始运行，但是结果可能不是我们所期望的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> java.lang.NoClassDefFoundError: org/apache/spark/SparkConf</span><br><span class="line">	at WorldCount$.main(WorldCount.scala:<span class="number">8</span>)</span><br><span class="line">	at WorldCount.main(WorldCount.scala)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">	at java.lang.reflect.Method.invoke(Method.java:<span class="number">497</span>)</span><br><span class="line">	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:<span class="number">144</span>)</span><br><span class="line">Caused by: java.lang.ClassNotFoundException: org.apache.spark.SparkConf</span><br><span class="line">	at java.net.URLClassLoader.findClass(URLClassLoader.java:<span class="number">381</span>)</span><br><span class="line">	at java.lang.ClassLoader.loadClass(ClassLoader.java:<span class="number">424</span>)</span><br><span class="line">	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:<span class="number">331</span>)</span><br><span class="line">	at java.lang.ClassLoader.loadClass(ClassLoader.java:<span class="number">357</span>)</span><br><span class="line">	... <span class="number">7</span> more</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>这是为什么呢？原因是我们在 <code>build.sbt</code> 中配置的 spark 依赖是这样的：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libraryDependencies += <span class="string">"org.apache.spark"</span> % <span class="string">"spark-core_2.10"</span> % <span class="string">"1.6.1"</span> % <span class="string">"provided"</span></span><br></pre></td></tr></table></figure>
<p>注意到后面的 <code>provided</code> 了吗？这个代表打包或者运行的时候不会将这个 jar 包的文件包含进去（注意：spark app 要求这样，注意不要把spark相关的jar包包含进去）。这样导致我们无法再 idea 中调试或者运行 spark app。</p>
<p>解决方案还是有的，sbt 和 maven（也是一个项目管理的软件）一样，提供了模块开发功能，我们定义两个模块，一个模块就是我们上面我们做好的，另一个是用来运行的，这个里面包含了运行时类库，配置如下：</p>
<ol>
<li>创建一个名为 <code>main</code> 的文件夹，把项目中的 <code>src</code> 文件夹移动到这个目录下</li>
<li>在项目根目录下创建名为 <code>run</code> 的文件夹</li>
<li><p>修改项目根目录下的 <code>build.sbt</code> 文件，内容为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">name := &quot;spark-sbt-demo&quot;</span><br><span class="line"></span><br><span class="line">version := &quot;1.0&quot;</span><br><span class="line"></span><br><span class="line">scalaVersion := &quot;2.10.4&quot;</span><br><span class="line"></span><br><span class="line">organization := &quot;spark.demo&quot;</span><br><span class="line"></span><br><span class="line">version := &quot;1.0.0-SNAPSHOT&quot;</span><br><span class="line"></span><br><span class="line">libraryDependencies += &quot;org.apache.spark&quot; % &quot;spark-core_2.10&quot; % &quot;1.6.1&quot; % &quot;provided&quot;</span><br><span class="line"></span><br><span class="line">lazy val root = (project in file(&quot;.&quot;)).aggregate(main, run)</span><br><span class="line"></span><br><span class="line">lazy val main = (project in file(&quot;main&quot;))</span><br><span class="line"></span><br><span class="line">lazy val run = (project in file(&quot;run&quot;)).dependsOn(main)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在子项目 <code>main</code> 创建 <code>build.sbt</code> 内容为：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libraryDependencies += <span class="string">"org.apache.spark"</span> % <span class="string">"spark-core_2.10"</span> % <span class="string">"1.6.1"</span> % <span class="string">"provided"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在子项目 <code>run</code> 创建 <code>build.sbt</code> 内容为 ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libraryDependencies += &quot;org.apache.spark&quot; % &quot;spark-core_2.10&quot; % &quot;1.6.1&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置运行参数，如下图：<br><img src="/images/scala/idea-spark-run-config.png" alt="idea-spark-run-config"><br>然后选择上面的运行配置，运行即可。这里可能会碰到一个异常：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: file:/Users/du/workspace/hekr/spark-sbt-demo/src/main/scala/WorldCount.scala</span><br><span class="line">	at org.apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:<span class="number">251</span>)</span><br><span class="line">	at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:<span class="number">270</span>)</span><br><span class="line">	......</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这是由于上面我们修改了改程序main文件的位置，导致找不到该文件所致，请自行设置为一个存在的文件路径或者修改为 <code>main/src/main/scala/WorldCount.scala</code> 重新运行即可成功。</p>
<h2 id="Sbt-本地依赖库存储位置配置"><a href="#Sbt-本地依赖库存储位置配置" class="headerlink" title="Sbt 本地依赖库存储位置配置"></a>Sbt 本地依赖库存储位置配置</h2><p>抽空再补上，其实就是建立一个连接，先自行思考方案。</p>
<h1 id="项目下载"><a href="#项目下载" class="headerlink" title="项目下载"></a>项目下载</h1><p>没有源码下载的都是耍流氓，<a href="/files/spark-sbt-demo.tar.gz">点这里下载</a></p>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2016/05/25/linux/Linux shell 命令/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>上一页</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2016/04/20/博客更新说明/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>

    <!-- share -->
    
        
    <div class="bdsharebuttonbox">
        <a href="#" class="bds_more" data-cmd="more"></a>
        <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
        <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
        <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
        <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
        <a href="#" class="bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
        <a href="#" class="bds_evernotecn" data-cmd="evernotecn" title="分享到印象笔记"></a>
        <a href="#" class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记"></a>
        <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
    </div>
    <script>
        window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};
        with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
    </script>


        

    
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">留言</h2>

  
  	 <div class="ds-thread" data-thread-key="2016/05/10/spark/sbt-idea-入门及配置/" data-title="sbt-idea-入门及配置" data-url="http://todu.top/2016/05/10/spark/sbt-idea-入门及配置/"></div>  
  
</section>

	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2016-05-10 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/spark/">spark<span>4</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/spark/">spark<span>5</span></a></li> <li><a href="/tags/scala/">scala<span>1</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->

<script type="text/javascript">
  var duoshuoQuery = { short_name: 'sdvdxl' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2016 杜龙少
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
