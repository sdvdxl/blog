<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 2 页 | 杜龙少的博客</title>
  <meta name="author" content="杜龙少">
  
  <meta name="description" content="杜龙少的博客">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="杜龙少的博客"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="杜龙少的博客" type="application/atom+xml">
  
  
    <link href="/favorite.ico" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/bootstrap.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">杜龙少的博客</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header page-header-inverse ">
  <h1 class="title title-inverse ">杜龙少的博客</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      杜龙少的博客
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-03-13 </div>
			<div class="article-title"><a href="/2016/03/13/golang/go读取文件/" >go读取文件</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h1 id="使用File"><a href="#使用File" class="headerlink" title="使用File"></a>使用File</h1><pre><code>不多说，直接上代码
</code></pre><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> readUseFile() &#123;</span><br><span class="line">	file, err := os.Open(<span class="string">"f:/file.txt"</span>)</span><br><span class="line">	handleError(err)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">defer</span> file.Close()</span><br><span class="line"></span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">512</span>)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		n, err := file.Read(buf)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//1</span></span><br><span class="line">		<span class="comment">//		if err != nil &amp;&amp; err == io.EOF &#123;</span></span><br><span class="line">		<span class="comment">//			break</span></span><br><span class="line">		<span class="comment">//		&#125;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//2</span></span><br><span class="line">		<span class="comment">//		if n == 0 &#123;</span></span><br><span class="line">		<span class="comment">//			break</span></span><br><span class="line">		<span class="comment">//		&#125;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//3</span></span><br><span class="line">		<span class="keyword">if</span> n == <span class="number">0</span> &amp;&amp; err != <span class="literal">nil</span> &amp;&amp; err == io.EOF &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		fmt.Print(n)</span><br><span class="line">		fmt.Print(<span class="keyword">string</span>(buf))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	handleError(err)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>可以看到，file本身具有读取文件内容的函数，入参事一个切片，是数据的缓冲区，出参第一个是实际读取的大小，第二个是读取过程中发生的错误。如果有数据且读取成功，则n&gt;0,如果恰好读到文件末尾，则n=0。如果读取过程中有错误发生，则err不为nil，如果读取正常且读到了文件末尾，则err为io.EOF。
读取过程中有三种方法可以跳出死循环。第一种方法是判断err状态，如果不为nil且是io.EOF，则已经读取完毕；第二种方法是判断实际读取的数量，如果读取的量为0，则认为已经读取结束。第三种方式是上面两种的结合，这种判断要比上面两种中仁和一种都要保险，缺点就是罗嗦点。
</code></pre>
	
	</div>
  <a type="button" href="/2016/03/13/golang/go读取文件/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-03-13 </div>
			<div class="article-title"><a href="/2016/03/13/golang/go交叉编译/" >go交叉编译</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>1.5之前需要进入go安装目录下的src目录，然后执行<br><code>GOOS=windows GOARCH=i386  CGO_ENABLED=0 ./make.bash --no-clean</code></p>
<p>1.5及其之后可以直接执行<code>CGO_ENABLED=0 GOOS=windows GOARCH=386 go build -o 输出文件名 go文件</code><br>其中<code>GOOS</code>有：<code>windows</code>,<code>linux</code>,<code>darwin</code>也就是mac系统<br><code>GOARCH</code>有：<code>adm64</code>和<code>386</code>分别对应64位平台和32位平台</p>

	
	</div>
  <a type="button" href="/2016/03/13/golang/go交叉编译/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-03-13 </div>
			<div class="article-title"><a href="/2016/03/13/golang/go中main/" >go中main</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>想必很多朋友在入门的时候都是拿main开始，而不是test，我也喜欢这样，我想可能是main比较为人熟知的用法吧，test在go中也是非常友好的，不需要依赖其他库就可方便使用。既然都偏向于main方法的开始和入门，那么这个博文就说一下go语言main相关的事情。<br>原本只打算写一下main包的拆分和运行方式，突然想到还有其他一些注意地方，那么就一并记录一下，其他的如果使用过程中遇到了，再进行记录。<br><strong>以下示例都是在GOPATH下进行</strong></p>
<h1 id="main函数定义"><a href="#main函数定义" class="headerlink" title="main函数定义"></a>main函数定义</h1><p>想要作为程序的运行入口，那么这个函数必须明明为main，同时要放到main包。main函数声明极其简单，如下：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main()&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样就声明并定义好了程序的运行的入口函数，不需要其他额外的参数和返回值。加上包的声明，完整的main文件就如下格式：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">func</span> main() &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>另外main文件名字可以随意命名，只需要后缀是<code>.go</code>就可以了，如：<code>a.go</code>, <code>main.go</code>, <code>server.go</code>等都是可以的。</p>
<h1 id="main-的运行"><a href="#main-的运行" class="headerlink" title="main 的运行"></a>main 的运行</h1><p>要运行main文件，go提供了2中方式：</p>
<ol>
<li><code>go run main.go</code> 其中main.go 就是要运行的main函数所在的文件</li>
<li><code>go build</code>命令，文件名可以省略，也可以加上， 还可以用用参数 <code>-o</code> 指定编译后的文件，如 <code>go build -o main.exe main.go</code> 就是把main.go文件编译成main.exe可执行文件，然后直接执行main.exe就可以运行了。</li>
</ol>
<h1 id="main-包文件（内容）的拆分"><a href="#main-包文件（内容）的拆分" class="headerlink" title="main 包文件（内容）的拆分"></a>main 包文件（内容）的拆分</h1><p>假如觉得一个main文件中放太多东西有点杂乱，那么可以把main函数和其他内容拆开，放到不同的文件中（这里指的都是main这个包中），文件名字随意。比如我们有个sum函数，那么可以把它放到math.go这个main包的文件中，然后main函数独立在main.go文件中，main方法可以直接调用main包（相同名字的包）的函数、方法或者变量。那么如何执行呢，当然就可以用上述的方法运行。但是如果用<code>go run main.go</code>这种方式，那么可能遇到一个问题：找不到sum这个函数。因为run的只是main.go 这一个文件，没有加载其他文件的内容，自然就找不到sum这个函数了，那么加载sum这个函数内容，自然就可以了，对应执行方式就变成了<code>go run main.go math.go</code>，也就是说，要把相关以来的内容相关的文件也要加到run 后面。用<code>go build</code> 如果不指定文件名字，那么go会自行加载依赖项目，可以顺利执行。</p>

	
	</div>
  <a type="button" href="/2016/03/13/golang/go中main/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-03-13 </div>
			<div class="article-title"><a href="/2016/03/13/golang/golang入门/" >golang入门</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>本文同步发表于<a href="http://www.jianshu.com/users/dc3cafc2a2f1" target="_blank" rel="external">我的简书</a>,<a href="http://www.jianshu.com/p/e00f0cf4f01c" target="_blank" rel="external">点此穿越</a></p>
<h1 id="Go-基本介绍"><a href="#Go-基本介绍" class="headerlink" title="Go 基本介绍"></a>Go 基本介绍</h1><h2 id="Go发展"><a href="#Go发展" class="headerlink" title="Go发展"></a>Go发展</h2><p>早在2007年9月，Go语言还是这帮大牛的20%自由时间的实验项目。 幸运的是， 到了2008年5月 ， Google发现了Go语言的巨大潜力， 从而开始全力支持这个项目 ， 让这批人可以全身心投入Go语言的设计和开发工作中。 Go语言的第一个版本在2009年11月正式对外发布，并在此后的两年内快速迭代，发展迅猛。 第一个正式版本的Go语言于2012年3月28 日正式发布， 让Go语言迎来了第一个引人瞩目的里程碑。截至现在，Go已经更新到1.5版本，1.5正式版就在8月份中旬发布。<br>Go编程语言是一个使得程序员更加有效率的开源项目。Go 是有表达力、简洁、清晰和有效率的。它的并行机制使其很容易编写多核和网络应用，而新奇的类型系统允许构建有弹性 的模块化程序。Go 编译到机器码非常快速，同时具有便利的垃圾回收和强大的运行时反射。它是快速的、静态类型编译语言，但是感觉上是动态类型的，解释型语言。</p>
<h2 id="Go语言最主要的特性："><a href="#Go语言最主要的特性：" class="headerlink" title="Go语言最主要的特性："></a>Go语言最主要的特性：</h2><ul>
<li>自动垃圾回收</li>
<li>更丰富的内置类型</li>
<li>函数多返回值</li>
<li>错误处理</li>
<li>匿名函数和闭包</li>
<li>类型和接口</li>
<li>并发编程</li>
<li>反射</li>
<li>语言交互性</li>
</ul>
<h1 id="开发环境配置"><a href="#开发环境配置" class="headerlink" title="开发环境配置"></a>开发环境配置</h1><p>请参见另一篇博客<a href="http://todu.top/golang/golanghuan-jing-da-jian">Golang 环境搭建</a></p>
<hr>
<p>下面切入正题，介绍Go语言编程，由于只是本篇只是一个快速了解Go，所以有些内容会略微一提，如果读者用到或者要深入了解，可自行找文档参考，这里有个印象即可。</p>
<h1 id="Go-编程基础"><a href="#Go-编程基础" class="headerlink" title="Go 编程基础"></a>Go 编程基础</h1><h2 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型"></a>基础数据类型</h2><ul>
<li>布尔类型：<code>bool</code></li>
<li>整数类型：<code>int8</code> <code>uint8</code> <code>int16</code> <code>uint16</code> <code>int32</code> <code>uint32</code> <code>int64</code>  <code>uint64</code> <code>int</code> <code>rune</code> <code>byte</code> <code>complex128</code> <code>complex64</code>，其中，<code>byte</code> 是 <code>int8</code> 的别名</li>
<li>浮点类型：<code>float32</code> <code>float64</code></li>
<li>字符串类型：<code>string</code></li>
<li>字符类型： <code>rune</code>，是 <code>int32</code> 的别名</li>
<li>空： <code>nil</code></li>
<li>万能类型： <code>interface{}</code><h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><code>+</code>    <code>&amp;</code>     <code>+=</code>    <code>&amp;=</code>     <code>&amp;&amp;</code>    <code>==</code>    <code>!=</code>   <code>(</code>    <code>)</code><br><code>-</code>    <code>|</code>     <code>-=</code>    <code>|=</code>     <code>||</code>    <code>&lt;</code>     <code>&lt;=</code>    <code>[</code>    <code>]</code><br><code>*</code>    <code>^</code>     <code>*=</code>    <code>^=</code>     <code>&lt;-</code>   <code>&gt;</code>     <code>&gt;=</code>   <code>{</code>    <code>}</code><br><code>/</code>    <code>&lt;&lt;</code>    <code>/=</code>    <code>&lt;&lt;=</code>    <code>++</code>    <code>=</code>     <code>:=</code>    <code>,</code>    <code>;</code><br><code>%</code>    <code>&gt;&gt;</code>    <code>%=</code>    <code>&gt;&gt;=</code>    <code>--</code>    <code>!</code>     <code>...</code>   <code>.</code>    <code>:</code><br><code>&amp;^</code>       <code>&amp;^=</code>    <code>-&gt;</code><h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2></li>
<li><code>len</code>：计算（字符串，数组或者切片，map）长度</li>
<li><code>cap</code>：计算（数组或者切片，map）容量</li>
<li><code>close</code>：关闭通道</li>
<li><code>append</code>：追加内容到切片</li>
<li><code>copy</code>：拷贝数组/切片内容到另一个数组/切片</li>
<li><code>delete</code>：用于删除map的元素<h2 id="变量的定义和赋值"><a href="#变量的定义和赋值" class="headerlink" title="变量的定义和赋值"></a>变量的定义和赋值</h2></li>
</ul>
<ol>
<li><p>先定义，后赋值。变量的定义要用<code>var</code> 关键字声明，如,<code>var str string</code>，这就定义了一个名字为“str”的<code>string</code>类型的变量；（有过其他编程语言经验的读者可能会有点不适应，不过没错，Go的变量类型就是放在变量后面的。）还可以一次定义多个变量，如 <code>var a string, b int</code>;这样就同时定义了一个字符串类型和一个int类型的变量；如果几个连续的变量是同样的类型，可以一次性在最后该类型变量后说明，不需要单个说明。<code>var a, b, c string, int d</code>。也可以多行分别定义，如：</p>
 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> b <span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> c <span class="keyword">int</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这种写法要重复写<code>var</code>这个关键字，其实这种写法是可以只写一个<code>var</code>的，等价于下面的写法：</p>
<pre><code><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a, b <span class="keyword">string</span></span><br><span class="line">    c <span class="keyword">int</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</code></pre><ol>
<li>变量的赋值<br><code>var a string</code>,定义一个<code>string</code>类型的<code>a</code>变量，然后<code>a = &quot;this is a string&quot;</code>就可以把字符串的值赋给a了。这里有个简便的写法，就是声明和赋值同时进行，以上两句等同于<code>var a string = &quot;this is a string&quot;</code>,这种写法大多数语言都是类似的.由于Go可以根据变量的值自动推断该变量的数据类型，所以还等价于<code>var a = &quot;this is a string&quot;</code>；另外Go中还有个更为简洁的写法，等同于<code>a := &quot;this is a string&quot;</code>，直接省略关键字<code>var</code>，取而代之的是一个操作符<code>：=</code>，这个操作符的作用就是声明并赋值。</li>
<li>常量的定义和赋值<br>常量用关键词<code>const</code>说明，并且常量的值是在定义的时候一次性赋值的，如定义一个字符串常量，<code>const CONST_STR = &quot;const string&quot;</code>等价于<code>const CONST_STR string = &quot;const string&quot;</code>。</li>
<li>*注意<br><code>const</code>，<code>var</code>和<code>:=</code>不可同时使用。</li>
</ol>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>函数的结构如下 <code>func func_name([param_name type][...]) [return_value type[...]]</code>。<br>以关键字<code>func</code>开头， 后面是函数名， 函数名后面是函数参数，参数个数大于等于0个，参数后面是返回值，返回值个数&gt;=0，也就是说，Go语言支持多返回值。<br>其中go中有个特殊的函数(其实还有一个init函数，但是作为入门篇，不在这里介绍了)，那就是main函数，main函数是无参，无返回值，名字是main的一个特殊函数，它是程序的入口，并且main函数只能定义在mian的包（下面有介绍）中。</p>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><p>如果您是Java开发者，想必对包的概念并不陌生。在Go语言中，如果开发中有来自不同库的同名的函数，该如何处理，这就要依靠package来区分，也就是说包的作用类似于作用于，是对函数，变量等作用范围的一种约束。</p>
<h3 id="包的定义"><a href="#包的定义" class="headerlink" title="包的定义"></a>包的定义</h3><p>包的定义是通过 <code>package</code>这个关键字来说明的，一般写在文件的最上方。如<code>package a</code>，则定义了一个名字为a的包。包的名字只允许有一级目录，即不允许类似java的<code>com.example.a</code>或者<code>com/example/a</code>这样的多层级定义。一般来说，包的名字最好和其父目录的名字一致，这样在使用包和包里的内容时会比较容易理解（另会有文章说明）。</p>
<h3 id="包的使用"><a href="#包的使用" class="headerlink" title="包的使用"></a>包的使用</h3><p>包的导入使用关键字<code>import</code>来声明，如要在其他包中导入上面定义的包<code>a</code>，则声明如下：<code>import &quot;a&quot;</code>，如果多个，可以类似定义变量：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"a"</span></span><br><span class="line">    <span class="string">"b"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="函数和变量（常量）导出规则"><a href="#函数和变量（常量）导出规则" class="headerlink" title="函数和变量（常量）导出规则"></a>函数和变量（常量）导出规则</h2><p>Go语言中，抛弃了类似C++和Java中的private，public，protected，或者是friendld的可见性定义，采取了极简方式。如果变量或者函数首字母大写，代表可以导出，即对其他包是可见的，否则是不可见的。</p>
<p>到这里，Go的基本概念已经基本讲清楚，下面用一个示例说明上面的概念。</p>
<ol>
<li>创建一个文件夹，名字假设叫做 <code>example</code>。</li>
<li><p>进入example，创建文件<code>main.go</code>,并添加以下内容：</p>
 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main <span class="comment">//因为这里有程序的入口，main方法存在，所以包名必须命名为main</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里导入要使用的包</span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"./number"</span> <span class="comment">//这里导入我们自己定义的包，“./”是说用相对路径的方式导入包</span></span><br><span class="line">	<span class="string">"fmt"</span> <span class="comment">//fmt是go标准包，用于处理输入输出</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//这是程序的主函数，写法就是这样固定的，无参，无返回值</span></span><br><span class="line"><span class="keyword">func</span> main() &#123;</span><br><span class="line">	<span class="comment">//调用我们的函数并把产生的结果赋值给定义的max和min变量，根据GetMaxAndMin的返回值类型，go自动推断出max和min的是int类型</span></span><br><span class="line">	max, min := number.GetMaxAndMin(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//调用格式话输出打印max和min</span></span><br><span class="line">	fmt.Printf(<span class="string">"max:%v, min:%v\n"</span>, max, min)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建文件<code>numbner.go</code>，并添加如下内容：</p>
 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里可以添加注释，这是单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span><br><span class="line">	这里也是注释，</span><br><span class="line">	是多行注释，</span><br><span class="line">	允许注释跨行</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">package</span> number<span class="comment">// 这是包名，除了文件的注释，一般包名要放在最上方</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里定义一个函数，用来获取values参数中的最大值和最小值。</span></span><br><span class="line"><span class="comment">// 函数名GetMaxAndMin大写代表其他包可见，如果是小写，则其他包不可引用该函数</span></span><br><span class="line"><span class="comment">// (a, b int, values ...int)，a，b, values都是该函的参数，a,b是必填的参数，</span></span><br><span class="line"><span class="comment">// ...代表values是变参，即长度不固定，个数&gt;=0,并且都是int类型</span></span><br><span class="line"><span class="comment">// (int, int)代表该函数有两个返回值，都是int类型</span></span><br><span class="line"><span class="keyword">func</span> GetMaxAndMin(a, b <span class="keyword">int</span>, values ...<span class="keyword">int</span>) (<span class="keyword">int</span>, <span class="keyword">int</span>) &#123;</span><br><span class="line">	max, min := a, a <span class="comment">//定义并赋值两个变量 max，min，并把a的值赋给max和min</span></span><br><span class="line">	<span class="keyword">if</span> a&lt;b &#123; <span class="comment">//go允许简单条件和控制语句之间不加小括号，并且大括号左部分必须和条件在同一行</span></span><br><span class="line">		max = b</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		min = b</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 这里是for循环，在go中for是非常给力的循环控制器，没有其他方式（不推荐用goto）</span></span><br><span class="line">	<span class="comment">// _ 的作用是说把遍历values产生的下标的值忽略掉，v是产生的values的值，</span></span><br><span class="line">	<span class="comment">// range 关键词 用来配合for，构成一个简单的循环结构，相当于for-each</span></span><br><span class="line">	<span class="comment">// 关于 “_”，因为go中不允许有多余的为使用的参数和为使用的包，所以“_”就充当了一个垃圾桶的角色，多返回值产生的不必要值可以填入“_”,</span></span><br><span class="line">	<span class="comment">// 从而达到控制编译器编译过程中不会报错。</span></span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> values &#123;</span><br><span class="line">		<span class="keyword">if</span> v&gt;a &#123;</span><br><span class="line">			max = v</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> v&lt;b &#123;</span><br><span class="line">			min = v</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> max, min</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>注意，文件保存编码是utf-8 。<br>打开终端（命令行工具），切换到example目录下，执行<code>go run main.go</code>,可以看到有内容输出：<br>&gt;<br>max:8, min:0</p>
<p><a href="http://todu.top/golang/golangming-ling">附Go命令</a></p>

	
	</div>
  <a type="button" href="/2016/03/13/golang/golang入门/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-03-13 </div>
			<div class="article-title"><a href="/2016/03/13/golang/golang-http-client-post/" >golang-http-client-post</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<hr>
<p>title: Golang环境搭建<br>date: 2016-03-13 11:10:48<br>tags:</p>
<ul>
<li>go</li>
<li>golang<br>category: golang</li>
</ul>
<hr>
<h1 id="下载Go"><a href="#下载Go" class="headerlink" title="下载Go"></a>下载Go</h1><p><a href="http://golang.org" target="_blank" rel="external">go官方网站</a>在大陆已经被和谐，要访问，如果没有梯子，这里有个<a href="http://www.tvdaili.com/" target="_blank" rel="external">传送门</a>,可以在线代理访问。首先就是要下载go开发程序了，建议<a href="http://golangtc.com/download" target="_blank" rel="external">在此处下载</a>对应版本。</p>
<h1 id="配置Go环境"><a href="#配置Go环境" class="headerlink" title="配置Go环境"></a>配置Go环境</h1><pre><code>## Window 环境
</code></pre><p>下载对应的windows版本（注意64位和32位系统），然后解压得到go目录，假如名字就叫go，绝对路径是E:\go。右键计算机(xp 是我的电脑，windows8是这台电脑)，选择属性，选择左侧的高级系统设置，接下来选择环境变量，出现环境变量的对话框。上面是当前用户的环境变量，也就是说配置的变量只是针对当前用户生效；下面是系统变量，对于整个系统的所有用户生效。我习惯于配置成系统变量，在此也是用系统变量举例。<br>点击系统变量下的新建按钮，变量名填写 GOROOT,变量值填写上面解压后的go路径，在这也就是 E:\go，然后点击确定。这个变量是用来配置go的home目录。再点击新建按钮，变量名填写GOPATH，变量值填写E:\gopath(gopath要存在，当然也可以选择其他文件夹)，点击确定。这个变量是用来指定go查找包的路径，也是用go get 命令所需安装的位置目录。然后找到PATH变量，点击编辑，变量值最后添加一个半角分号，然后再输入 %GOROOT%\bin，点击确定。可以关闭所有窗口了。<br>在开始菜单中打开cmd命令行（也可以用快捷键，windows键+R，然后输入cmd回车）。在窗口中输入go回车，如果有go相关的帮助打印，则说明配置成功，否则没有成功，重新校验上面的环境变量配置是否正确。</p>
<pre><code>## Linux 环境
假设对应版本的go解压后绝对路径是/home/user/go。
vi（或者你喜欢的其他编辑器）打开 ~/.bashrc文件，在后面加入
&gt;
GOROOT=/home/user/go
GOPATH=/home/user/gopath
PATH=$PATH:$GOROOT/bin
export GOROOT GOPATH PATH

然后 运行命令 `soure ~/.bashrc`
输入 go ，如果打印go帮助文档，说明配置成功，否则检查环境变量配置是否正确。
</code></pre><h1 id="编写第一个Go程序"><a href="#编写第一个Go程序" class="headerlink" title="编写第一个Go程序"></a>编写第一个Go程序</h1><p>用你喜欢的编辑器编辑一个文件，加入文件名叫 hello.go 。<br>敲入以下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import （</span><br><span class="line">“fmt”</span><br><span class="line">）</span><br><span class="line">func main()&#123;</span><br><span class="line">    fmt.println(&quot;Hello World!&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后再该文件当前目录下，输入 go build hello.go，在目录下会生成一个 hello(windows下是hello.exe)文件，运行该文件，可以看到控制台输入出 HelloWorld,运行成功。</p>

	
	</div>
  <a type="button" href="/2016/03/13/golang/golang-http-client-post/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-03-13 </div>
			<div class="article-title"><a href="/2016/03/13/golang/Golang环境搭建/" >Golang环境搭建</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h1 id="下载Go"><a href="#下载Go" class="headerlink" title="下载Go"></a>下载Go</h1><p><a href="http://golang.org" target="_blank" rel="external">go官方网站</a>在大陆已经被和谐，要访问，如果没有梯子，这里有个<a href="http://www.tvdaili.com/" target="_blank" rel="external">传送门</a>,可以在线代理访问。首先就是要下载go开发程序了，建议<a href="http://golangtc.com/download" target="_blank" rel="external">在此处下载</a>对应版本。</p>
<h1 id="配置Go环境"><a href="#配置Go环境" class="headerlink" title="配置Go环境"></a>配置Go环境</h1><pre><code>## Window 环境
</code></pre><p>下载对应的windows版本（注意64位和32位系统），然后解压得到go目录，假如名字就叫go，绝对路径是E:\go。右键计算机(xp 是我的电脑，windows8是这台电脑)，选择属性，选择左侧的高级系统设置，接下来选择环境变量，出现环境变量的对话框。上面是当前用户的环境变量，也就是说配置的变量只是针对当前用户生效；下面是系统变量，对于整个系统的所有用户生效。我习惯于配置成系统变量，在此也是用系统变量举例。<br>点击系统变量下的新建按钮，变量名填写 GOROOT,变量值填写上面解压后的go路径，在这也就是 E:\go，然后点击确定。这个变量是用来配置go的home目录。再点击新建按钮，变量名填写GOPATH，变量值填写E:\gopath(gopath要存在，当然也可以选择其他文件夹)，点击确定。这个变量是用来指定go查找包的路径，也是用go get 命令所需安装的位置目录。然后找到PATH变量，点击编辑，变量值最后添加一个半角分号，然后再输入 %GOROOT%\bin，点击确定。可以关闭所有窗口了。<br>在开始菜单中打开cmd命令行（也可以用快捷键，windows键+R，然后输入cmd回车）。在窗口中输入go回车，如果有go相关的帮助打印，则说明配置成功，否则没有成功，重新校验上面的环境变量配置是否正确。</p>
<pre><code>## Linux 环境
假设对应版本的go解压后绝对路径是/home/user/go。
vi（或者你喜欢的其他编辑器）打开 ~/.bashrc文件，在后面加入
&gt;
GOROOT=/home/user/go
GOPATH=/home/user/gopath
PATH=$PATH:$GOROOT/bin
export GOROOT GOPATH PATH

然后 运行命令 `soure ~/.bashrc`
输入 go ，如果打印go帮助文档，说明配置成功，否则检查环境变量配置是否正确。
</code></pre><h1 id="编写第一个Go程序"><a href="#编写第一个Go程序" class="headerlink" title="编写第一个Go程序"></a>编写第一个Go程序</h1><p>用你喜欢的编辑器编辑一个文件，加入文件名叫 hello.go 。<br>敲入以下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import （</span><br><span class="line">“fmt”</span><br><span class="line">）</span><br><span class="line">func main()&#123;</span><br><span class="line">    fmt.println(&quot;Hello World!&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后再该文件当前目录下，输入 go build hello.go，在目录下会生成一个 hello(windows下是hello.exe)文件，运行该文件，可以看到控制台输入出 HelloWorld,运行成功。</p>

	
	</div>
  <a type="button" href="/2016/03/13/golang/Golang环境搭建/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-03-13 </div>
			<div class="article-title"><a href="/2016/03/13/git/删除git已经跟踪的文件或者目录/" >删除git已经跟踪的文件或者目录</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>如果第一次提交的时候，没有在gitignore文件中添加忽略文件，那么这些文件（目录也是文件）就会被git跟踪，push的时候也会被推送到远程。所以最好就是一开始在commit之前先添加到gitignore中。</p>
<p>如果文件已经被跟踪且被推送到远程，可以按照下面方法解决：<br>1.<code>rm -rf 文件</code></p>
<ol>
<li><code>git rm -r --cached 要忽略的文件</code><br>3.<code>git add -A (添加所有)</code><br>4.<code>git push origin 分支</code></li>
</ol>
<p>如果同名的文件过多，如：.class 文件被提交了，那么如果这样一个一个显然效率太低，可以按照下面方法操作</p>
<ol>
<li><code>find . -iname 文件名 -exec rm -rf {}\;</code></li>
<li>重复上面的步骤，文件名替换为下一个要删除的文件名</li>
<li>修改gitignore，添加忽略文件</li>
<li><code>git rm -r --cached 要忽略的文件</code></li>
<li><code>git add -A</code></li>
<li><code>git push origin 分支</code></li>
</ol>

	
	</div>
  <a type="button" href="/2016/03/13/git/删除git已经跟踪的文件或者目录/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-03-11 </div>
			<div class="article-title"><a href="/2016/03/11/hadoop/hadoop集成hive/" >hadoop集成hive</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h1 id="前置条件"><a href="#前置条件" class="headerlink" title="前置条件"></a>前置条件</h1><p>hadoop和yarn已经配置好并且成功运行。</p>
<h1 id="选择版本和下载"><a href="#选择版本和下载" class="headerlink" title="选择版本和下载"></a>选择版本和下载</h1><p><a href="http://www.apache.org/dyn/closer.cgi/hive/" target="_blank" rel="external">下载hive</a>，有两个版本可以选择，hive1和hive2，hive2版本MR功能已经废弃，将来版本可能会直接去掉，如果要用hive的MR功能，那么请选择hive1相应版本，否则的话选哪个都可以进行测试。</p>
<h1 id="配置hive"><a href="#配置hive" class="headerlink" title="配置hive"></a>配置hive</h1><ol>
<li>下载完hive后，解压，然后<code>sudo vi /etc/profile</code>编辑文件，添加环境变量</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HIVE_HOME=hive目录的绝路路径</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HIVE_HOME</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> HIVE_HOME PATH</span><br></pre></td></tr></table></figure>
<ol>
<li><p>控制台输入<code>source /etc/profile</code>使环境变量生效。</p>
</li>
<li><p>进入$HIVE_HOME/conf目录，拷贝<code>hive-default.xml.template</code>并重命名为<code>hive-site.xml</code>，编辑：（如果没有该参数，请自行添加，存在则改之）</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.exec.scratchdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="comment">&lt;!--hdfs目录 hive目录需要手动创建,并改为777权限--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Scratch space for Hive jobs<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="comment">&lt;!--hdfs目录，需要手动创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>location of default database for the warehouse<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://localhost:3306/hive?createDatabaseIfNotExist=true<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="comment">&lt;!--修改为自己的mysql数据库--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>JDBC connect string for a JDBC metastore<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Driver class name for a JDBC metastore<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="comment">&lt;!--mysql用户名--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>username to use against metastore database<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="comment">&lt;!--mysql密码--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>password to use against metastore database<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol>
<li><p>然后查找value是<code>${system</code>开头的，替换成具体的本地绝对路径，可以创建一个hive用户，放到hive用户目录下。</p>
</li>
<li><p>拷贝<code>hive-env.sh.template</code>并重命名<code>hive-env.sh</code>，添加如下内容，注意环境变量值更换为自己的路径。</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HADOOP_HOME=/home/hadoop/hadoop-2.7.1 </span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/<span class="built_in">local</span>/share/jdk1.8.0_73</span><br></pre></td></tr></table></figure>
<ol>
<li>将hive-site.xml拷贝一份到hadoop的配置目录。</li>
<li>下载mysql驱动放到hive目录下的lib目录中。</li>
<li>启动hive，控制台输入<code>hive</code>，如果正确则输出一段信息后进入hive交互模式。</li>
</ol>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><ol>
<li><blockquote>
<p>Caused by: org.datanucleus.store.rdbms.connectionpool.DatastoreDriverNotFoundException: The specified datastore driver (“com.mysql.jdbc.Driver”) was not found in the CLASSPATH. Please check your CLASSPATH specification, and the name of the driver.</p>
</blockquote>
<p> <strong>解决方法</strong>：下载mysql驱动放到hive的lib目录</p>
</li>
<li><blockquote>
<p>org.apache.hadoop.security.AccessControlException: Permission denied: user=hive, access=WRITE, inode=”/tmp/hadoop-yarn/staging/hive/.staging”:hadoop:supergroup:drwxr-xr-x</p>
</blockquote>
<p> <strong>解决方法</strong>：在hdfs中创建tmp目录，并改为777权限。</p>
</li>
<li><blockquote>
<p>Starting Job = job_1457683200911_0001, Tracking URL = <a href="http://10.10.1.110:8088/proxy/application_1457683200911_0001/" target="_blank" rel="external">http://10.10.1.110:8088/proxy/application_1457683200911_0001/</a><br>Kill Command = /home/hadoop/hadoop-2.7.1/bin/hadoop job  -kill job_1457683200911_0001<br>Hadoop job information for Stage-1: number of mappers: 0; number of reducers: 0，打开管理页面发现信息：waiting for AM container to be allocated, launched and register with RM.</p>
</blockquote>
<p> <strong>解决方法</strong>：yarn没有配置正确，没有启动<code>nodemanager</code>，启动命令<code>yarn-daemon.sh start nodemanager</code>，启动之后即可运行job。</p>
</li>
</ol>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol>
<li><a href="http://blog.csdn.net/jyf211314/article/details/34110721" target="_blank" rel="external">hadoop2.2完全分布式集群+hive+mysql存储元数据配置</a>排版有点乱，请将就看</li>
<li><a href="http://blog.csdn.net/z363115269/article/details/39048589" target="_blank" rel="external">hive导入HDFS数据</a> 和上面毛病类似</li>
</ol>

	
	</div>
  <a type="button" href="/2016/03/11/hadoop/hadoop集成hive/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-03-11 </div>
			<div class="article-title"><a href="/2016/03/11/spring/SpingXD结合Hadoop/" >SpingXD结合Hadoop</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>之前的文章介绍了<a href="/Spring-XD简介">Spring XD</a>，<a href="/以分布式方式运行Spring-XD">以分布式方式运行Spring-XD</a>和<a href="/安装启动Hadoop集群">安装启动Hadoop集群</a>的文章。本文将简单介绍（刚学，很LOW(⊙﹏⊙)b）SpringXD和Hadoop，HDFS结合配置和使用方法。</p>
<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><p>已经按照上述提到的两篇文章或者其他资料搭建并运行了SpringXD和Hadoop。</p>
<h1 id="配置SpringXD"><a href="#配置SpringXD" class="headerlink" title="配置SpringXD"></a>配置SpringXD</h1><ol>
<li>运行命令<code>jps</code>找到<code>AdminServerApplication</code>和<code>ContainerServerApplication</code>两项，结束进程<code>kill 进程pid</code>。</li>
<li>编辑SpingXD的配置文件<code>server.yaml</code>，在<code>spring</code>节点下增加以下hadoop的配置信息：</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hadoop:</span></span><br><span class="line">	&lt;!-- 注意换成自己的hdfs地址 --<span class="string">&gt;</span><br><span class="line"></span><span class="attr">    fsUri:</span> hdfs://<span class="number">10.10</span><span class="number">.1</span><span class="number">.110</span>:<span class="number">8020</span></span><br><span class="line"><span class="attr">    resourceManagerHost:</span> <span class="number">10.10</span><span class="number">.1</span><span class="number">.110</span></span><br><span class="line"><span class="attr">    resourceManagerPort:</span> <span class="number">8032</span></span><br><span class="line"><span class="attr">    yarnApplicationClasspath:</span></span><br></pre></td></tr></table></figure>
<p>然后启动xd-admin<code>bin/xd-admin</code>和xd-container<code>bin/xd-container</code>。</p>
<ol>
<li>切换到hadoop用户下，使用命令<code>hadoop fs -mkdir /xd</code>创建目录，然后更改权限<code>hadoop fs -chmod -R 777 /xd</code>（如果没有配置hadoop的环境变量，则请进入hadoop的目录使用<code>bin/hadoop</code>命令代替<code>hadoop</code>）</li>
<li>打开新的控制台，进入xd-shell交互环境，假如根据上面的Spring-XD配置文章配置了安全措施，那么还需要执行下面的命令<code>admin config server --uri http://xd-adminIP:9393 --username 用户名 --password 密码</code>进行授权后登录。</li>
<li>创建stream，向hdfs中写入数据<code>stream create --name myhdfsstream1 --definition &quot;time | hdfs&quot; --deploy</code>，用命令<code>hadoop fs ls /xd/myhdfsstream1</code>即可看到有临时文件生成。</li>
</ol>

	
	</div>
  <a type="button" href="/2016/03/11/spring/SpingXD结合Hadoop/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-03-09 </div>
			<div class="article-title"><a href="/2016/03/09/other/Hexo-Git-Oschina-Golang-Tenxcloud打造博客/" >Hexo+Git+Oschina+Golang+Tenxcloud打造博客</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p><em>Hexo</em> 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。具体使用方法<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">参见这里</a></p>
<p><em>Git</em> 介绍和使用<a href="http://gitref.org/zh/index.html" target="_blank" rel="external">参见这里</a></p>
<p><em>OSCina</em> 开源信息平台，这里指的是<a href="http://git.oschina.net/" target="_blank" rel="external">其下的Git托管平台</a></p>
<p><em>Golang</em> 谷歌开发的一款跨平台的语言，<a href="golang.org">官方地址</a>在国内无法打开，<a href="http://golangtc.com/" target="_blank" rel="external">golangtc</a>是一个Golang学习网站，可以自行查阅。</p>
<p><em>TenxCloud</em> 也就是<a href="https://www.tenxcloud.com/" target="_blank" rel="external">时速云</a>，是国内最早的容器云平台之一(Container as a service)，提供丰富的容器化应用，镜像构建与发布，弹性可伸缩的容器服务，以及灵活、高性能的容器主机管理。容器化应用包括但不限于云主机，云数据库，大数据，Web应用等。</p>
<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><ol>
<li>安装hexo</li>
<li>安装Golang，并配置Golang环境</li>
<li>安装Git，并配置相关环境变量</li>
</ol>
<h1 id="创建Git仓库"><a href="#创建Git仓库" class="headerlink" title="创建Git仓库"></a>创建Git仓库</h1><p>打开<a href="http://git.oschina.net/" target="_blank" rel="external">开源中国Git托管平台</a>，(注册后)登录，点击右上角<code>+</code>号，新建项目，输入项目名，描述，如果不想公开的话，可以选择私有，其余默认即可，点击创建。然后克隆到本地。命令行切换到刚才克隆的项目根目录，输入<code>hexo init</code>，hexo博客初始化完成。输入<code>hexo generate</code>可以渲染页面，生成静态页面，默认是在public文件夹。hexo默认初始化忽略了public文件夹，我们需要修改<code>.gitignore</code>文件，删除public的记录，这样保证可以同步到git仓库中。</p>
<h1 id="编写Golang-Server服务"><a href="#编写Golang-Server服务" class="headerlink" title="编写Golang Server服务"></a>编写Golang Server服务</h1><p>在项目根目录创建一个叫<code>server.go</code>的文件，把下面的代码考入即可。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"net/http"</span></span><br><span class="line">	<span class="string">"log"</span></span><br><span class="line">	<span class="string">"os/exec"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() &#123;</span><br><span class="line">	fs := http.FileServer(http.Dir(<span class="string">"public"</span>))</span><br><span class="line">	http.Handle(<span class="string">"/"</span>, fs)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//用于git的webhook，触发pull</span></span><br><span class="line">	http.HandleFunc(<span class="string">"/_blog/_pull"</span>, <span class="keyword">func</span>(writer http.ResponseWriter, request *http.Request) &#123;</span><br><span class="line">		cmd := exec.Command(<span class="string">"git"</span>,<span class="string">"pull"</span>)</span><br><span class="line">		<span class="keyword">if</span> err:=cmd.Start(); err!=<span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(<span class="string">"git pull error"</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := http.ListenAndServe(<span class="string">":80"</span>, <span class="literal">nil</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(<span class="string">"ListenAndServe: "</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过git提交文件到远程。</p>
<h1 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h1><p>这里之所以选择时速云，是因为一开始接触这类最早的就是这个平台，所以使用的还算熟悉。下面我们就在上面创建一个容器。</p>
<ol>
<li>登录之后，<a href="https://hub.tenxcloud.com/repos/sdvdxl/golang" target="_blank" rel="external">选择这个镜像</a>，此镜像集成了Git，Golang，SSH服务，点击右侧部署镜像按钮。如下图配置：<br><img src="/images/other/2016-03-09_2351.png" alt="配置">，点击创建按钮，等待片刻即可创建成功。</li>
<li><a href="https://console.tenxcloud.com/containers?0" target="_blank" rel="external">返回容器服务</a>，切换到北京2区，可以看到我们刚才创建的容器服务，点击如图所示的图标，进入控制台：<br><a href="/images/other/2016-03-09_2355.png">进入控制台</a>。</li>
<li>进入控制台后，使用git命令<code>git clone 之前创建的git仓库地址</code>，克隆完后，进入项目目录，输入<code>go build server.go</code>，然后输入<code>./server &amp;</code>运行服务端。</li>
<li>现在打开容器服务视图，找到我们创建的容器，点击右侧的查看所有服务地址，点击协议为<code>HTTP</code>的那个服务地址，在打开的页面中即可看到我们的博客内容。</li>
<li>点击绑定域名，绑定80端口域名，我们就可以通过自己的域名访问了。</li>
</ol>
<h1 id="设置WebHooks"><a href="#设置WebHooks" class="headerlink" title="设置WebHooks"></a>设置WebHooks</h1><p>打开开源中国git平台，找到刚创建的项目，点击右侧的管理，然后点击左侧的WebHooks，URL输入<code>http://你的域名/_blog/_pull</code>，Push和合并请求打上勾，然后提交。</p>
<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><ol>
<li>不要选择杭州区的服务，因为采用的是阿里云服务，所以会导致没有备案的域名没法打开。</li>
<li>本博客公开托管在<a href="http://git.oschina.net/sdvdxl/blog" target="_blank" rel="external">开源中国的Git服务上</a>，大家可以fork之后改动后用作自己的博客平台。</li>
<li>方便起见，Golang脚本已经编译成了<code>Windows</code> <code>Mac</code> <code>Linux</code> 各平台的32和64位版本，无需编译server.go文件了，可以直接选择相应平台文件进行运行，启动web服务。</li>
</ol>

	
	</div>
  <a type="button" href="/2016/03/09/other/Hexo-Git-Oschina-Golang-Tenxcloud打造博客/#more" class="btn btn-default more">阅读此文</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> 上一页</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/3/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="搜索" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
	<div class="widget">
		<h4>分类</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/android/">android<span>1</span></a></li>
		
			<li><a href="/categories/git/">git<span>1</span></a></li>
		
			<li><a href="/categories/golang/">golang<span>10</span></a></li>
		
			<li><a href="/categories/hadoop/">hadoop<span>2</span></a></li>
		
			<li><a href="/categories/java/">java<span>1</span></a></li>
		
			<li><a href="/categories/linux/">linux<span>4</span></a></li>
		
			<li><a href="/categories/mysql/">mysql<span>1</span></a></li>
		
			<li><a href="/categories/other/">other<span>1</span></a></li>
		
			<li><a href="/categories/spark/">spark<span>3</span></a></li>
		
			<li><a href="/categories/spring/">spring<span>6</span></a></li>
		
			<li><a href="/categories/sql/">sql<span>1</span></a></li>
		
			<li><a href="/categories/sqoop/">sqoop<span>2</span></a></li>
		
			<li><a href="/categories/windows/">windows<span>1</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>标签云</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/端口/">端口<span>1</span></a></li>
		
			<li><a href="/tags/zookeeper/">zookeeper<span>2</span></a></li>
		
			<li><a href="/tags/kafka/">kafka<span>1</span></a></li>
		
			<li><a href="/tags/archlinux/">archlinux<span>2</span></a></li>
		
			<li><a href="/tags/go/">go<span>8</span></a></li>
		
			<li><a href="/tags/spark/">spark<span>4</span></a></li>
		
			<li><a href="/tags/java/">java<span>1</span></a></li>
		
			<li><a href="/tags/mysql/">mysql<span>3</span></a></li>
		
			<li><a href="/tags/arch/">arch<span>2</span></a></li>
		
			<li><a href="/tags/hadoop/">hadoop<span>4</span></a></li>
		
			<li><a href="/tags/安卓/">安卓<span>1</span></a></li>
		
			<li><a href="/tags/http/">http<span>1</span></a></li>
		
			<li><a href="/tags/golang/">golang<span>10</span></a></li>
		
			<li><a href="/tags/博客/">博客<span>1</span></a></li>
		
			<li><a href="/tags/软件/">软件<span>1</span></a></li>
		
			<li><a href="/tags/sqoop/">sqoop<span>2</span></a></li>
		
			<li><a href="/tags/spring-xd/">spring xd<span>6</span></a></li>
		
			<li><a href="/tags/linux/">linux<span>3</span></a></li>
		
			<li><a href="/tags/sql/">sql<span>1</span></a></li>
		
			<li><a href="/tags/录音/">录音<span>1</span></a></li>
		
		
		   <li><a href="/tags">...<span>32</span></a></li>
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>最新文章</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2016/03/16/spring/通过SpringXD将信息分片-文件夹存储到HDFS/" ><i class="fa fa-file-o"></i>通过SpringXD将信息分片|文件夹存储到HDFS</a>
      </li>
    
      <li>
        <a href="/2016/03/16/spark/sparkApp提交到SpringXD出现错误可能情况及解决方法/" ><i class="fa fa-file-o"></i>sparkApp提交到SpringXD出现错误可能情况...</a>
      </li>
    
      <li>
        <a href="/2016/03/15/linux/linux下根据端口号查询对应进程/" ><i class="fa fa-file-o"></i>linux下根据端口号查询对应进程</a>
      </li>
    
      <li>
        <a href="/2016/03/15/golang/golang打印错误栈信息/" ><i class="fa fa-file-o"></i>golang打印错误栈信息</a>
      </li>
    
      <li>
        <a href="/2016/03/15/golang/golang容易忽略导致入坑的方面/" ><i class="fa fa-file-o"></i>golang容易忽略导致入坑的方面</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>链接</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/sdvdxl" title="My Github account." target="_blank"]);">My Github</a></li>
	
		<li><i class="fa fa-linkedin"></i><a href="http://www.linkedin.com/in/sdvdxl" title="My Linkin account." target="_blank"]);">My LinkedIn</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->

	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2016 杜龙少
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
