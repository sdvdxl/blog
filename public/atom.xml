<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-11-04T04:54:40.564Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2017/11/04/hello-world/"/>
    <id>http://yoursite.com/2017/11/04/hello-world/</id>
    <published>2017-11-04T04:54:40.564Z</published>
    <updated>2017-11-04T04:54:40.564Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>RESTFul API 错误的设计</title>
    <link href="http://yoursite.com/2017/05/13/other/RESTFul-API-%E9%94%99%E8%AF%AF%E7%9A%84%E8%AE%BE%E8%AE%A1/"/>
    <id>http://yoursite.com/2017/05/13/other/RESTFul-API-错误的设计/</id>
    <published>2017-05-13T15:15:53.000Z</published>
    <updated>2017-05-22T02:44:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>不管是WEB还是移动端，如果需要调用Http接口，那么不可避免要处理各种错误，包括客户端参数完整性校验，类型校验，系统错误等。如果一个设计规范的接口错误返回值，不但可以规范调用方统一处理方式，给出更合理的提示，而且后端也有着接口返回规范的作用。这里讨论的其实并不单纯是返回的错误设计，也包括业务上的错误设计。</p><h1 id="接口返回设计"><a href="#接口返回设计" class="headerlink" title="接口返回设计"></a>接口返回设计</h1><p>接口返回需要有http status，错误说明，并且要提供一个完整的错误列表，可以通过简单的错误说明或者错误代码查阅到详细的错误原因。简要错误说明可以只包含简短的文字描述，可以包含错误代码。如果说哪种方式更为合理，我更倾向于错误代码+简要错误说明。如果只有简要错误说明，这个错误描述可能有些描述不合理，如果后端改了说明，那么对应的错误映射也要更改，调用方也要跟着修改。如果只有错误代码，调用方难以一眼看出错误原因，需要查阅错误码，这个比较啰嗦。如果同时提供错误码和简要错误说明，调用方可以通过简要说明快速定位问题，如果要处理错误逻辑，根据错误码表映射即可，这样即使描述改变了，但是错误码是永久不变的，不会影响调用方的处理逻辑。返回的结构如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 <span class="number">200</span> OK</div><div class="line"><span class="attribute">Content-Type</span>: application/json;charset=UTF-8</div><div class="line"></div><div class="line">&#123;</div><div class="line">"msg": "错误说明"</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h1 id="服务端错误设计和处理"><a href="#服务端错误设计和处理" class="headerlink" title="服务端错误设计和处理"></a>服务端错误设计和处理</h1><p>根据RESTful接口的http status，对于错误，可以分为以下几大类（常用）：</p><ol><li>权限错误 401</li><li>参数错误 400</li><li>重复，冲突 409</li><li>找不到资源 404</li><li>服务器错误 500</li></ol><p>对于以上5中分类，除了第5种系统服务器错误外，其余四种我们可以分别设计一个错误（异常）类型。至于第5中服务器错误为什么不需要，因为我们需要根据上面四种错误是需要单独判断的，如果不在上面的类型中，直接返回500即可。对于上面的错误，在返回或者抛出的时候，应该具体到原因，比如： 参数错误，要写明哪里错误，是手机号不合法还是邮箱不合法，还是哪个参数类型不对，这样便于调用方定位问题。</p><p>以Java为例，我们可以定义以下异常：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthExcepption</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</div><div class="line"><span class="keyword">protected</span> <span class="keyword">int</span> code;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">AuthExcepption</span><span class="params">(<span class="keyword">int</span> code, String msg)</span> </span>&#123;</div><div class="line"><span class="keyword">this</span>.code = code;</div><div class="line"><span class="keyword">super</span>(msg);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCode</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> code;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 对于其他三个也是这个格式。</span></div><div class="line"><span class="comment">// IllegalArgumentException</span></div><div class="line"><span class="comment">// DuplicatedException</span></div><div class="line"><span class="comment">// NotFoundException</span></div></pre></td></tr></table></figure></p><p>在做异常统一处理的时候，可以判断极少的类型即可，下面是 spring mvc 的统一异常处理方式：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Body</span> </span>&#123;</div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> code;</div><div class="line"><span class="keyword">private</span> String msg;</div><div class="line"><span class="comment">// setter and getter</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Body</span><span class="params">(<span class="keyword">int</span> code, String msg)</span> </span>&#123;</div><div class="line"><span class="keyword">this</span>.code = code;</div><div class="line"><span class="keyword">this</span>.msg = msg;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@ExceptionHandler</span>(value = &#123;AuthExcepption.class&#125;)</div><div class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;Object&gt; <span class="title">handleAuthExcepption</span><span class="params">(AuthExcepption ex, WebRequest request)</span> </span>&#123;</div><div class="line"><span class="comment">// 记录日志</span></div><div class="line"><span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity(<span class="keyword">new</span> Body(ex.getCode(),ex.getMessage()),HttpStatus.UNAUTHORIZED);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@ExceptionHandler</span>(value = &#123;IllegalArgumentException.class&#125;)</div><div class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;Object&gt; <span class="title">handleIllegalArgumentException</span><span class="params">(IllegalArgumentException ex, WebRequest request)</span> </span>&#123;</div><div class="line"><span class="comment">// 记录日志</span></div><div class="line"><span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity(<span class="keyword">new</span> Body(ex.getCode(),ex.getMessage()), HttpStatus.BAD_REQUEST);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@ExceptionHandler</span>(value = &#123;DuplicatedException.class&#125;)</div><div class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;Object&gt; <span class="title">handleIllegalArgumentException</span><span class="params">(DuplicatedException ex, WebRequest request)</span> </span>&#123;</div><div class="line"><span class="comment">// 记录日志</span></div><div class="line"><span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity(<span class="keyword">new</span> Body(ex.getCode(),ex.getMessage()), HttpStatus.CONFLICT);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@ExceptionHandler</span>(value = &#123;NotFoundException.class&#125;)</div><div class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;Object&gt; <span class="title">handleIllegalArgumentException</span><span class="params">(NotFoundException ex, WebRequest request)</span> </span>&#123;</div><div class="line"><span class="comment">// 记录日志</span></div><div class="line"><span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity(<span class="keyword">new</span> Body(ex.getCode(),ex.getMessage()),HttpStatus.NOT_FOUND);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>在业务层那么需要这么处理，抛出一种异常，附带具体的错误码和简要消息：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">(User user)</span> </span>&#123;</div><div class="line"><span class="keyword">if</span> (!isValid(user.getPhone())) &#123;</div><div class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="number">10001</span>,<span class="string">"手机："</span>+user.getPhone()+<span class="string">" 不合法"</span>);</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>在上面的业务处理示例中，我们采用了传递错误码的形式，另一种处理方式是定义一个该错误码对应的异常，比如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PhoneIllegalException</span> <span class="keyword">extends</span> <span class="title">IllegalArgumentException</span></span>&#123;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">PhoneIllegalException</span> <span class="params">(String msg)</span> </span>&#123;</div><div class="line"><span class="keyword">super</span>(<span class="number">10001</span>,msg);</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>然后业务层就可以直接抛出此异常了：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">(User user)</span> </span>&#123;</div><div class="line"><span class="keyword">if</span> (!isValid(user.getPhone())) &#123;</div><div class="line"><span class="keyword">throw</span> <span class="keyword">new</span> PhoneIllegalException(<span class="string">"手机："</span>+user.getPhone()+<span class="string">" 不合法"</span>);</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;不管是WEB还是移动端，如果需要调用Http接口，那么不可避免要处理各种错误，包括客户端参数完整性校验，类型校验，系统错误等。如果一个设计规范的接口错误返回值，不但可以规范调用方统一处理方式，给出更合理的提示，而且后端也有着接口返回规范的作用。这里讨论的其实并不单纯是返回的
      
    
    </summary>
    
    
      <category term="API" scheme="http://yoursite.com/tags/API/"/>
    
      <category term="RESTFul" scheme="http://yoursite.com/tags/RESTFul/"/>
    
      <category term="错误" scheme="http://yoursite.com/tags/%E9%94%99%E8%AF%AF/"/>
    
      <category term="异常" scheme="http://yoursite.com/tags/%E5%BC%82%E5%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>安装Hbase分布式集群</title>
    <link href="http://yoursite.com/2017/02/15/hadoop/%E5%AE%89%E8%A3%85hbase%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4/"/>
    <id>http://yoursite.com/2017/02/15/hadoop/安装hbase分布式集群/</id>
    <published>2017-02-15T09:44:43.000Z</published>
    <updated>2017-05-14T08:10:16.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>以下操作都是在hadoop这个用户下</strong></p><ol><li>下载最新版hbase，放到/home/hadoop目录下，解压，生成目录 hbase-1.2.4</li><li>下载zookeeper，放到 /home/hadoop/zookeeper-3.4.9， 解压生成 zookeeper-3.4.9 目录</li><li>编辑conf下hbase-site.xml<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://master:9000/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>master,slave1,slave2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.property.dataDir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/home/hadoop/zookeeper-3.4.9<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure></li></ol><p>其中 <code>hbase.zookeeper.quorum</code> 配置是hbase集群机器的名字，上面的值代表在master，slave1，和slave2上启动hbase和zookeeper<br><code>hbase.zookeeper.property.dataDir</code> 是用于配置zookeeper安装目录的，这里我把zookeeper安装到了 <code>/home/hadoop/zookeeper-3.4.9</code>    </p><ol><li>修改 conf下 hbase-env.sh<br>修改JAVA_HOME，将其指向具体的java安装目录，（最小版本要求是1.7）</li><li><p>启动hbase</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bin/start-hbase.sh</div></pre></td></tr></table></figure></li><li><p>测试<br>输入 <code>bin/hbase shell</code> 进入交互环境，</p></li></ol><ul><li>创建表 <code>create &#39;t1&#39;,{NAME =&gt; &#39;f1&#39;, VERSIONS =&gt; 2},{NAME =&gt; &#39;f2&#39;, VERSIONS =&gt; 2}</code></li><li>列出表 <code>list</code><br>如果没有出错那么安装成功。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;以下操作都是在hadoop这个用户下&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;下载最新版hbase，放到/home/hadoop目录下，解压，生成目录 hbase-1.2.4&lt;/li&gt;
&lt;li&gt;下载zookeeper，放到 /home/hadoop/zo
      
    
    </summary>
    
      <category term="hadoop" scheme="http://yoursite.com/categories/hadoop/"/>
    
    
      <category term="hadoop" scheme="http://yoursite.com/tags/hadoop/"/>
    
      <category term="hbase" scheme="http://yoursite.com/tags/hbase/"/>
    
  </entry>
  
  <entry>
    <title>域名说明</title>
    <link href="http://yoursite.com/2017/02/15/%E5%9F%9F%E5%90%8D%E8%AF%B4%E6%98%8E/"/>
    <id>http://yoursite.com/2017/02/15/域名说明/</id>
    <published>2017-02-15T03:02:30.000Z</published>
    <updated>2017-05-22T02:46:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>由于该域名尚未备案，导致不能正常访问文章，请切换到域名 <a href="http://du.uke.wiki" target="_blank" rel="external">http://du.uke.wiki</a>访问。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;由于该域名尚未备案，导致不能正常访问文章，请切换到域名 &lt;a href=&quot;http://du.uke.wiki&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://du.uke.wiki&lt;/a&gt;访问。&lt;/p&gt;

      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Gnome-Shell插件</title>
    <link href="http://yoursite.com/2016/08/02/linux/Gnome-Shell%E6%8F%92%E4%BB%B6/"/>
    <id>http://yoursite.com/2016/08/02/linux/Gnome-Shell插件/</id>
    <published>2016-08-02T08:24:18.000Z</published>
    <updated>2017-11-04T08:30:45.785Z</updated>
    
    <content type="html"><![CDATA[<h2 id="状态栏菜单按钮"><a href="#状态栏菜单按钮" class="headerlink" title="状态栏菜单按钮"></a><a href="https://extensions.gnome.org/extension/327/axe-menu/" target="_blank" rel="external">状态栏菜单按钮</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-menu.png" alt=""></p><h2 id="Dock"><a href="#Dock" class="headerlink" title="Dock"></a><a href="https://extensions.gnome.org/extension/307/dash-to-dock/" target="_blank" rel="external">Dock</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-dock.png" alt=""></p><h2 id="状态栏音乐控制"><a href="#状态栏音乐控制" class="headerlink" title="状态栏音乐控制"></a><a href="https://extensions.gnome.org/extension/55/media-player-indicator/" target="_blank" rel="external">状态栏音乐控制</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-media-player-indicator.png" alt=""></p><h2 id="菜单列表"><a href="#菜单列表" class="headerlink" title="菜单列表"></a><a href="https://extensions.gnome.org/extension/6/applications-menu/" target="_blank" rel="external">菜单列表</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-applications-menu.png" alt=""></p><h2 id="Tab-切换"><a href="#Tab-切换" class="headerlink" title="Tab 切换"></a><a href="https://extensions.gnome.org/extension/15/alternatetab/" target="_blank" rel="external">Tab 切换</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-alternatetab.png" alt=""></p><h2 id="任务栏"><a href="#任务栏" class="headerlink" title="任务栏"></a><a href="https://extensions.gnome.org/extension/584/taskbar/" target="_blank" rel="external">任务栏</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-taskbar.png" alt=""></p><h2 id="状态栏数字键-大写键状态"><a href="#状态栏数字键-大写键状态" class="headerlink" title="状态栏数字键+大写键状态"></a><a href="https://extensions.gnome.org/extension/36/lock-keys/" target="_blank" rel="external">状态栏数字键+大写键状态</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-lock-keys.png" alt=""></p><h2 id="番茄工作法插件"><a href="#番茄工作法插件" class="headerlink" title="番茄工作法插件"></a><a href="https://extensions.gnome.org/extension/53/pomodoro/" target="_blank" rel="external">番茄工作法插件</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-pomodoro.png" alt=""></p><h2 id="系统托盘"><a href="#系统托盘" class="headerlink" title="系统托盘"></a><a href="https://extensions.gnome.org/extension/495/topicons/" target="_blank" rel="external">系统托盘</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-topicons.png" alt=""></p><h2 id="状态栏网速"><a href="#状态栏网速" class="headerlink" title="状态栏网速"></a><a href="https://extensions.gnome.org/extension/104/netspeed/" target="_blank" rel="external">状态栏网速</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-netspeed.png" alt=""></p><h2 id="状态栏日历"><a href="#状态栏日历" class="headerlink" title="状态栏日历"></a><a href="https://extensions.gnome.org/extension/163/analog-clock/" target="_blank" rel="external">状态栏日历</a></h2><p><img src="http://public-links.qiniudn.com/gnome-shell-alternatetab.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;状态栏菜单按钮&quot;&gt;&lt;a href=&quot;#状态栏菜单按钮&quot; class=&quot;headerlink&quot; title=&quot;状态栏菜单按钮&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://extensions.gnome.org/extension/327/axe-menu/&quot; ta
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="gnome" scheme="http://yoursite.com/tags/gnome/"/>
    
  </entry>
  
  <entry>
    <title>SpringXD HA 配置</title>
    <link href="http://yoursite.com/2016/06/29/spring/SpringXD%20HA%20%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2016/06/29/spring/SpringXD HA 配置/</id>
    <published>2016-06-29T08:34:48.000Z</published>
    <updated>2017-11-04T08:30:45.789Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://docs.spring.io/spring-xd/docs/1.3.1.RELEASE/reference/html" target="_blank" rel="external">SpringXD官方文档</a> 上说的不是很清楚，而且有些配置（如 配置 <code>hadoop</code> namenode ha ）并没有在上面说明，只是简单的说明了怎么配置 <code>namenode</code> ，如果没有ha配置，那么在生产环境中会令人头痛。</p><h1 id="XD-Admin-HA"><a href="#XD-Admin-HA" class="headerlink" title="XD Admin HA"></a>XD Admin HA</h1><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>在 <a href="http://docs.spring.io/spring-xd/docs/1.3.1.RELEASE/reference/html/#_configuring_spring_xd_for_high_availabilty_ha" target="_blank" rel="external">官方文档</a> 中，有说如何配置，就是通过启动多个<code>admin</code> ，然后通过 <code>zookeeper</code> 管理。<br><code>Spring XD</code> 要求只有一个主节点来和 <code>Container</code> 交互，例如 <code>Stream</code> 发布等。同时，这些操作都是按顺序处理的。假如只有一个 <code>admin</code> ，那么就存在单点失败的风险，因此，在生产环境中推荐做法是启动 2 个或者多 <code>admin</code> 。注意：在有多个 <code>admin</code> 节点的时候，每个 <code>admin</code> 都可以处理 <a href="http://docs.spring.io/spring-xd/docs/1.3.1.RELEASE/reference/html/#REST-API" target="_blank" rel="external">REST</a> 请求，但是只有一个实例会作为 <code>Leader</code> 处理请求并更新运行时的状态。如果 <code>Leader</code> 宕掉，另一个可用的admin就会成为新的 <code>Leader</code> 来接管任务。当然，Spring XD 的HA不只是他自身要求ha，还需要依赖外部服务，如：<code>zookeeper</code>，<code>MessageBus</code> 等 HA 配置。</p><h2 id="配置信息"><a href="#配置信息" class="headerlink" title="配置信息"></a>配置信息</h2><p>如果要配置 <code>admin</code> 的 ha，那么启动多个 <code>admin</code> 即可，但是请注意，如果是在同一台机器上部署多个<code>admin</code>，需要在启动时候添加如下参数以防止和默认的端口（<code>9393</code>）冲突：<br><code>--httpPort</code> 用来指定rest api端口<br><code>--mgmtPort</code> 用来指定管理端口<br>如果在不同机器上启动，只需配置相同的配置文件，然后启动即可。</p><h1 id="XD-Container-HA"><a href="#XD-Container-HA" class="headerlink" title="XD Container HA"></a>XD Container HA</h1><p>当添加 <code>Container</code> 的时候，Spring XD 可以动态水平扩展，也就是说不需要额外什么操作，只需像第一次启动 <code>Container</code> 一样输入命令 <code>bin/xd-container</code> 启动即可。</p><h1 id="XD-Hadoop-namenode-HA"><a href="#XD-Hadoop-namenode-HA" class="headerlink" title="XD Hadoop namenode HA"></a>XD Hadoop namenode HA</h1><p>如果 xd 中创建 <code>stream</code> 或者其他任务是用到了 <code>hdfs</code> 的功能，那么要配置 <code>hadoop</code> 的<code>namenode</code> ，要在 <code>xd/config/servers.xml</code>中的 <code>spring.hadoop.fsUri</code> 的配置项中配置。注意，这个地方只允许配置一个 <code>host</code>，如果有备用 <code>namenode</code> ，是不允许配置在这个地方的。但是这样配置是有问题的，就是存在 <code>hadoop</code> 的 <code>namenode</code> 主从切换后 xd 的 <code>stream</code> 无法写入 <code>hdfs</code> 或者读取 <code>hdfs</code> 的故障。要解决这个问题，我们要再 <code>xd/config/hadoop.properties</code> 中配置如下配置项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">dfs.nameservices=MyCluster</div><div class="line">dfs.ha.namenodes.MyCluster=nn1,nn2</div><div class="line">dfs.namenode.rpc-address.MyCluster.nn2=hadoop-master1-host:8020</div><div class="line">dfs.namenode.rpc-address.MyCluster.nn1=hadoop-master2-host:8020</div><div class="line">dfs.client.failover.proxy.provider.MyCluster=org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</div></pre></td></tr></table></figure></p><p>其中，配置项中所有的 <code>MyCluster</code> 要换成自己项目中 hadoop 集群的名字，然后在 <code>xd/config/servers.xml</code> 中 <code>spring.hadoop.fsUri</code> 值配置成 <code>hdfs://MyCluster:8020</code>（注意<code>8020</code>端口换成自己配置的），<code>hadoop-master1-host</code> 和 <code>hadoop-master1-host</code> 换成自己集群的 hadoop的 master 的主机名字或者ip。这样配置后，重新启动 <code>admin</code> 和 <code>container</code> 就会自动检测 hadoop 的 <code>namenode</code> 主从，并自行切换。<br>如果要在 <code>xd-shell</code>中使用，需要登录shell之后（如果有安全设置，还需要先用密码登录成功），输入一下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">hadoop config props set --property dfs.nameservices=MyCluster</div><div class="line">hadoop config props set --property dfs.ha.namenodes.MyCluster=nn1,nn2</div><div class="line">hadoop config props set --property dfs.namenode.rpc-address.MyCluster.nn1=hadoop-master1-host:8020</div><div class="line">hadoop config props set --property dfs.namenode.rpc-address.MyCluster.nn2=hadoop-master2-host:8020</div><div class="line">hadoop config props set --property dfs.client.failover.proxy.provider.MyCluster=org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</div><div class="line">hadoop config fs --namenode hdfs://MyCluster</div></pre></td></tr></table></figure></p><p><code>MyCluster</code>，<code>hadoop-master1-host</code> 和 <code>hadoop-master2-host</code> 同上配置。对于 shell 来说，单纯配置 hadoop 的主 <code>namenode</code>也是可以的，因为这个配置只是对 shell 起作用。如果觉得每次打开shell都要输入上面几行配置太繁琐的话，可以将 <code>xd/config/hadoop.properties</code> 中配置的项目添加一份到<code>shell/config/hadoop.properties</code> 即可，这样在shell中操作hdfs，只需配置 <code>hadoop config fs --namenode hdfs://MyCluster:8020</code> 即可。</p><h2 id="附言"><a href="#附言" class="headerlink" title="附言"></a>附言</h2><p>对于如何在xd中使用hadoop的namenode ha配置，xd 官方文档中并未见说明，而是百般Goole之后得到的结果，而且由于xd资料尚少，搜索结果不佳，最后通过搜索关键词 <code>xd namenode fail</code> 才找到解决方案，<a href="https://jira.spring.io/browse/XD-1745" target="_blank" rel="external">请参见这里</a>。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://docs.spring.io/spring-xd/docs/1.3.1.RELEASE/reference/html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;SpringXD官方文档&lt;/a&gt; 上说的不是很清楚，而且有些
      
    
    </summary>
    
      <category term="spring" scheme="http://yoursite.com/categories/spring/"/>
    
    
      <category term="spring" scheme="http://yoursite.com/tags/spring/"/>
    
      <category term="xd" scheme="http://yoursite.com/tags/xd/"/>
    
  </entry>
  
  <entry>
    <title>sbt源配置</title>
    <link href="http://yoursite.com/2016/06/20/spark/sbt%E6%BA%90%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2016/06/20/spark/sbt源配置/</id>
    <published>2016-06-20T03:21:13.000Z</published>
    <updated>2017-11-04T08:30:45.788Z</updated>
    
    <content type="html"><![CDATA[<h1 id="sbt-默认源下载有点慢，我们可以调教它，让它从我们自己配置的源下载。"><a href="#sbt-默认源下载有点慢，我们可以调教它，让它从我们自己配置的源下载。" class="headerlink" title="sbt 默认源下载有点慢，我们可以调教它，让它从我们自己配置的源下载。"></a>sbt 默认源下载有点慢，我们可以调教它，让它从我们自己配置的源下载。</h1><h2 id="配置源"><a href="#配置源" class="headerlink" title="配置源"></a>配置源</h2><p>在 <code>.sbt</code> （默认是在用户名下）文件夹中创建 <code>repositories</code> 文件，然后添加如下内容:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">[repositories]</div><div class="line">  local</div><div class="line">  my: http://o8r69qphn.bkt.clouddn.com/</div><div class="line">  Nexus osc: http://maven.oschina.net/content/groups/public/</div><div class="line">  Nexus osc thirdparty: http://maven.oschina.net/content/repositories/thirdparty/</div><div class="line">  central: http://central.maven.org/maven2/</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">[ivy]</div><div class="line">  local</div><div class="line">  my: http://o8r69qphn.bkt.clouddn.com/</div><div class="line">  Nexus osc: http://maven.oschina.net/content/groups/public/</div><div class="line">  Nexus osc thirdparty: http://maven.oschina.net/content/repositories/thirdparty/</div><div class="line">  central: http://central.maven.org/maven2/</div><div class="line">  TypeSafe: https://oss.sonatype.org/content/repositories/releases/</div><div class="line">  #proxy库</div><div class="line">  typesafe-ivy-releases: http://dl.bintray.com/typesafe/ivy-releases/</div><div class="line">  typesafe-maven-releases: http://dl.bintray.com/typesafe/maven-releases/</div><div class="line">  typesafe-sbt-plugin-releases: http://dl.bintray.com/sbt/sbt-plugin-releases/</div><div class="line"></div><div class="line">  #group库</div><div class="line">  ivy-releases : typesafe-ivy-releases,typesafe-sbt-plugin-releases</div></pre></td></tr></table></figure></p><p>上面 <code>repositories</code> 是说加载maven镜像中的库文件从这个标签下的路径中找， <code>local</code> 代表从本地中找，默认是 <code>.M2</code> 中，下面的都是自定义源，名字随便取。<br>下面 <code>ivy</code> 是加载ivy库的。</p><h2 id="修改加载配置项"><a href="#修改加载配置项" class="headerlink" title="修改加载配置项"></a>修改加载配置项</h2><p>单纯修改上面的源还不足以让sbt加载我们的源。打开 sbt 软件安装位置下的 <code>conf/sbtopts</code> 文件，在其中添加：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-Dsbt.override.build.repos=true</div></pre></td></tr></table></figure></p><p>然后就可以生效了。</p><p><strong> 没有深入研究，如果有错还请指出 </strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;sbt-默认源下载有点慢，我们可以调教它，让它从我们自己配置的源下载。&quot;&gt;&lt;a href=&quot;#sbt-默认源下载有点慢，我们可以调教它，让它从我们自己配置的源下载。&quot; class=&quot;headerlink&quot; title=&quot;sbt 默认源下载有点慢，我们可以调教它，让
      
    
    </summary>
    
      <category term="spark" scheme="http://yoursite.com/categories/spark/"/>
    
    
      <category term="scala" scheme="http://yoursite.com/tags/scala/"/>
    
      <category term="sbt" scheme="http://yoursite.com/tags/sbt/"/>
    
  </entry>
  
  <entry>
    <title>Linux shell 命令</title>
    <link href="http://yoursite.com/2016/05/25/linux/Linux-Shell-%E5%91%BD%E4%BB%A4/"/>
    <id>http://yoursite.com/2016/05/25/linux/Linux-Shell-命令/</id>
    <published>2016-05-25T01:34:07.000Z</published>
    <updated>2017-11-04T08:30:45.785Z</updated>
    
    <content type="html"><![CDATA[<h2 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h2><p>适用于ip4</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -Pnl +M -i4 | grep port</div></pre></td></tr></table></figure><p>适用于ip6</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -Pnl +M -i6 | grep port</div></pre></td></tr></table></figure><h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><p>杀掉名字一样的java进程<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jps |grep SparkSubmit | awk &apos;&#123;print &quot;kill -9 &quot; $1&#125;&apos; | sh</div></pre></td></tr></table></figure></p><p>如果仅仅是打印命令，则后面的管道和sh不需要加，如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jps |grep SparkSubmit | awk &apos;&#123;print &quot;kill -9 &quot; $1&#125;&apos;</div></pre></td></tr></table></figure></p><h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><p>删除找到的符合条件的文件（或者目录）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">find . -iname target -exec rm -rf &#123;&#125; \;</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;lsof&quot;&gt;&lt;a href=&quot;#lsof&quot; class=&quot;headerlink&quot; title=&quot;lsof&quot;&gt;&lt;/a&gt;lsof&lt;/h2&gt;&lt;p&gt;适用于ip4&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td clas
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>sbt-idea-入门及配置</title>
    <link href="http://yoursite.com/2016/05/10/spark/sbt-idea-%E5%85%A5%E9%97%A8%E5%8F%8A%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2016/05/10/spark/sbt-idea-入门及配置/</id>
    <published>2016-05-10T01:35:48.000Z</published>
    <updated>2017-11-04T08:30:45.788Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java-环境配置"><a href="#Java-环境配置" class="headerlink" title="Java 环境配置"></a>Java 环境配置</h1><p>这个就不多说了，这是前提条件，请自行安装后配置正确，如果不清楚请自行搜索 <strong>java 环境变量配置</strong> 相关问题。</p><h1 id="Scala-配置"><a href="#Scala-配置" class="headerlink" title="Scala 配置"></a>Scala 配置</h1><p>首先要要配置 scala 环境。从<a href="http://scala-lang.org/" target="_blank" rel="external">官方</a>地址下载，这里我们使用scala2.10.6版本，所以<a href="http://scala-lang.org/download/2.10.6.html" target="_blank" rel="external">从这里下载</a>对应的平台版本。Windows请下载 <a href="http://downloads.lightbend.com/scala/2.10.6/scala-2.10.6.zip" target="_blank" rel="external">scala-2.10.6.zip</a> ，MacOS和Linux请下载 <a href="http://downloads.lightbend.com/scala/2.10.6/scala-2.10.6.tgz" target="_blank" rel="external">scala-2.10.6.tgz</a> 。</p><p>下载完成后，解压到一个目录，然后配置环境变量 <code>SCALA_HOME</code> ，把scala的解压后的绝对路径配置到 <code>SCALA_HOME</code> ，然后增加 <code>PATH</code> 的配置。以下以 WIndows 和 Linux 举例来说，假如这里解压后得到的文件夹为 <code>scala-2.10.6</code>。</p><h2 id="Windows-环境"><a href="#Windows-环境" class="headerlink" title="Windows 环境"></a>Windows 环境</h2><p>假如 <code>scala-2.10.6</code> 文件夹放在了 <code>C:\</code>目录下，那么新增 <code>SCALA_HOME</code> 的值为 <code>C:\scala-2.10.6</code> ，然后找到 <code>PATH</code> 这个环境变量， 在已有的值后面添加 <code>;%SCALA_HOME%\bin</code> （注意前面的分号），重新打开一个新的命令行窗口即可操作。关于windows环境变量的其他说明情自行补脑，这里就不多啰嗦了。</p><h2 id="Linux-和-Mac-环境"><a href="#Linux-和-Mac-环境" class="headerlink" title="Linux 和 Mac 环境"></a>Linux 和 Mac 环境</h2><p>这里假定我们 <code>scala-2.10.6</code> 的 scala 目录存放在 <code>/usr/local/</code> 下，绝对路径就是 <code>/usr/local/scala-2.10.6</code> 。</p><h3 id="Bash-环境"><a href="#Bash-环境" class="headerlink" title="Bash 环境"></a>Bash 环境</h3><p>bash 环境下可以修改 <code>~/.bashrc</code> 或者 <code>/etc/profile</code> 文件，添加一下内容：             </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">SCALA_HOME=/usr/<span class="built_in">local</span>/scala-2.10.6</div><div class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$SCALA_HOME</span>/bin</div><div class="line"></div><div class="line"><span class="built_in">export</span> SCALA_HOME PATH</div></pre></td></tr></table></figure><p>然后执行 <code>source ~/.bashrc</code> 或者 <code>source /etc/profile</code> 即可。</p><h3 id="Zsh-环境"><a href="#Zsh-环境" class="headerlink" title="Zsh 环境"></a>Zsh 环境</h3><p>如果你的终端bash用的是 zsh ，那么需要在 <code>~/.zshrc</code> 文件中增加上述内容，然后执行 <code>source ~/.zshrc</code> 即可。</p><h1 id="Sbt-配置"><a href="#Sbt-配置" class="headerlink" title="Sbt 配置"></a>Sbt 配置</h1><p><a href="http://www.scala-sbt.org/" target="_blank" rel="external">官方地址</a>，<a href="http://www.scala-sbt.org/download.html" target="_blank" rel="external">从这里下载</a>，如果是MacOS的话，可以依照这里提示的方法进行快捷安装，如果是其他平台或者想手动配置，<a href="https://dl.bintray.com/sbt/native-packages/sbt/0.13.11/sbt-0.13.11.zip" target="_blank" rel="external">点击这里直接下载</a>即可。</p><p>下载完成并解压，得到文件夹 <code>sbt</code>。</p><h2 id="Windows-环境-1"><a href="#Windows-环境-1" class="headerlink" title="Windows 环境"></a>Windows 环境</h2><p>假如我们将 <code>sbt</code> 文件夹放到了 <code>C:\</code>目录下。新增环境变量 <code>SBT_HOME</code> 值为 <code>C:\sbt</code>， 在 <code>PATH</code> 变量值后面添加 <code>;%SBT_HOME%\bin</code>，重新打开一个新的命令行窗口即可。</p><h2 id="Linux-或者-Mac-环境"><a href="#Linux-或者-Mac-环境" class="headerlink" title="Linux 或者 Mac 环境"></a>Linux 或者 Mac 环境</h2><p>这里假定我们将 <code>sbt</code> 目录放在了 <code>/usr/local/</code> 目录下。同上面配置 scala 环境变量一样。</p><h3 id="Bash-环境-1"><a href="#Bash-环境-1" class="headerlink" title="Bash 环境"></a>Bash 环境</h3><p>编辑 <code>~/.bashrc</code> 或者 <code>/etc/profile</code> ，新增以下内容:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">SBT_HOME=/usr/<span class="built_in">local</span>/sbt</div><div class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$SBT_HOEM</span>/bin</div><div class="line"></div><div class="line"><span class="built_in">export</span> SBT_HOME PATH</div></pre></td></tr></table></figure><p>然后执行 <code>source ~/.bashrc</code> 或者 <code>source /etc/profile</code> 即可生效。</p><h3 id="Zsh-环境-1"><a href="#Zsh-环境-1" class="headerlink" title="Zsh 环境"></a>Zsh 环境</h3><p>编辑 <code>~/.zshrc</code>， 添加上面的内容并保存后，执行 <code>source ~/.zshrc</code> 即可生效。</p><h2 id="示例程序"><a href="#示例程序" class="headerlink" title="示例程序"></a>示例程序</h2><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><p>在随意一个地方创建一个文件夹，名字为 <code>spark-sbt-demo</code> ，下面是目录结构：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">spark-sbt-demo                                                                                                                                                                         </div><div class="line">├── build.sbt</div><div class="line">├── project</div><div class="line">│   ├── build.properties</div><div class="line">│   └── plugins.sbt</div><div class="line">└── src</div><div class="line">    ├── main</div><div class="line">        ├── scala</div><div class="line">           └── WordCount.scala</div></pre></td></tr></table></figure><p>build.sbt 文件中添加如下内容（注意每行要用空行隔开）：</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">name := <span class="string">"spark-sbt-demo"</span></div><div class="line"></div><div class="line">version := <span class="string">"1.0"</span></div><div class="line"></div><div class="line">scalaVersion := <span class="string">"2.10.6"</span></div><div class="line"></div><div class="line">organization := <span class="string">"spark.demo"</span></div><div class="line"></div><div class="line">version := <span class="string">"1.0.0-SNAPSHOT"</span></div><div class="line"></div><div class="line">libraryDependencies += <span class="string">"org.apache.spark"</span> % <span class="string">"spark-core_2.10"</span> % <span class="string">"1.6.1"</span> % <span class="string">"provided"</span></div></pre></td></tr></table></figure><p>WordCount.scala 文件内容：</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">  * Created by sdvdxl on 16/5/11.</span></div><div class="line"><span class="comment">  */</span></div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">WordCount</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</div><div class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setAppName(<span class="string">"spark-sbt-demo"</span>).setMaster(<span class="string">"local[*]"</span>)</div><div class="line">    <span class="keyword">val</span> sc  = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</div><div class="line">    sc.textFile(<span class="string">"src/main/scala/WordCount.scala"</span>).flatMap(_.split(<span class="string">" "</span>)).map(word=&gt;(word,<span class="number">1</span>)).reduceByKey(_+_).foreach(println)</div><div class="line">    sc.stop()</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>build.properties 文件内容 ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sbt.version = 0.13.11</div></pre></td></tr></table></figure><p>plugins.sbt 文件先保持为空。</p><p>至此，我们已经创建了一个 sbt 机构的项目。</p><p>接下来会说明使用sbt下载依赖，使用 idea 创建 sbt 项目，在idea中如何运行sbt管理的 spark app。</p><h2 id="Sbt-的基本使用"><a href="#Sbt-的基本使用" class="headerlink" title="Sbt 的基本使用"></a>Sbt 的基本使用</h2><p>上面我们创建了一个用 sbt 管理的 spark app 项目，如果想要提交到spark中运行，那么需要打包成jar包，好在 sbt 本身或者插件提供了这样的功能。</p><h3 id="应用打包"><a href="#应用打包" class="headerlink" title="应用打包"></a>应用打包</h3><p>打开命令行，切换到该项目目录下，然后输入 <code>sbt</code> 之后，进入 sbt 的交互中，然后输入 <code>package</code> ，开始打包，最后如果看到类似</p><blockquote><p>[info] Done packaging.<br>  [success] Total time: 11 s, completed 2016-5-11 12:32:09</p></blockquote><p>字样，那么说明打包成功，打成的 jar 包在上面的日志中可以找到。</p><h3 id="第三方-jar-统一打包"><a href="#第三方-jar-统一打包" class="headerlink" title="第三方 jar 统一打包"></a>第三方 jar 统一打包</h3><p>在写应用的时候，我们不只是用到 <code>spark</code> 自身的 jar 包，还会用到好多其他第三方类库，那么，在提交应用到 spark 运行的时候，这些第三方依赖也需要一并提交上去，否则会出现找不到类的问题。如果依赖少的话，直接将这些 jar 包直接一个一个提交上去也没问题，但是一旦依赖了大量的类库，这种方法显然是低效费力的，那么怎么才能将这些所有的第三方依赖打成一个 jar 包呢？</p><p>sbt 本身没有提供这样的功能，但是我们可以依靠相应的插件完成此操作。记得上面有个文件内容留空的 <code>plugins.sbt</code> 文件吗？这个文件中可以配置我们想要完成特定功能的插件，现在我们在其中添加如下内容：</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">addSbtPlugin(<span class="string">"com.eed3si9n"</span> % <span class="string">"sbt-assembly"</span> % <span class="string">"0.14.2"</span>)</div></pre></td></tr></table></figure><p>然后重新 进入 sbt 交互式环境，输入 <code>assemblyPackageDependency</code> 回车，稍后将看到类似如下输出：    </p><blockquote><p>[info] Done packaging.<br>  [success] Total time: 41 s, completed 2016-5-11 13:36:37</p></blockquote><p>这样就成功的将所有依赖的第三方类库打包到一个 jar 包中了，具体打包的文件可以在上面的日志中看到。</p><h2 id="使用-idea-创建-sbt-项目"><a href="#使用-idea-创建-sbt-项目" class="headerlink" title="使用 idea 创建 sbt 项目"></a>使用 idea 创建 sbt 项目</h2><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>使用 idea 创建 sbt 项目需要安装 <code>scala</code> 和 <code>sbt</code> 插件。<br>打开idea的首选项，然后找到 <code>Plugins</code> ，点击 <code>Browser repositores...</code> 按钮，输入 <code>scala</code> 搜索，然后找到 <code>scala</code> 和 <code>sbt</code> 的插件进行安装，如下图所示：<br><img src="/images/scala/scala-sbt-plugin.png" alt="scala-sbt-plugins"><br>安装完成后重启idea。</p><h3 id="创建-sbt-项目"><a href="#创建-sbt-项目" class="headerlink" title="创建 sbt 项目"></a>创建 sbt 项目</h3><p>File -&gt; New -&gt; Project… 打开项目创建向导：<br><img src="/images/scala/sbt-project-1.png" alt="创建sbt项目"><br>创建完成后，等待idea刷新项目，目录结构大体如下（project/project 和 target相关没有列出）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">spark-sbt-demo                                                                                                                                                                </div><div class="line">├── build.sbt</div><div class="line">├── project</div><div class="line">│   ├── build.properties</div><div class="line">│   └── plugins.sbt</div><div class="line">└── src</div><div class="line">    ├── main</div><div class="line">    │   ├── java</div><div class="line">    │   ├── resources</div><div class="line">    │   ├── scala</div><div class="line">    │   └── scala-2.11</div><div class="line">    └── test</div><div class="line">        ├── java</div><div class="line">        ├── resources</div><div class="line">        ├── scala</div><div class="line">        └── scala-2.11</div></pre></td></tr></table></figure><ul><li><code>plugins.sbt</code> 文件放置插件配置</li><li><code>build.sbt</code> 是整体的项目配置信息</li><li><code>build.properties</code> 可以设置 sbt 版本</li><li><code>java</code> 目录存放 java 文件</li><li><code>scala</code> 目录存放 scala 文件</li><li><code>resources</code> 目录用来存放配置文件</li><li><code>test</code> 相关目录用来存放测试相关文件<h2 id="在-idea-中-运行-spark-app"><a href="#在-idea-中-运行-spark-app" class="headerlink" title="在 idea 中 运行 spark app"></a>在 idea 中 运行 spark app</h2>上面我们介绍了如何使用 idea 项目向导创建一个 sbt 项目，现在我们来说一下如何在 idea 中直接运行 sbt 构建的 spark app。</li></ul><p>这里我们使用一开始我们创建的那个项目，使用 idea 导入功能，File -&gt; Open 找到项目目录打开即可。<br>在 <code>WordCount.scala</code> 文件中右键，选择 <code>Run WordCount</code> ，开始运行，但是结果可能不是我们所期望的：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Exception in thread <span class="string">"main"</span> java.lang.NoClassDefFoundError: org/apache/spark/SparkConf</div><div class="line">at WorldCount$.main(WorldCount.scala:<span class="number">8</span>)</div><div class="line">at WorldCount.main(WorldCount.scala)</div><div class="line">at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</div><div class="line">at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</div><div class="line">at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</div><div class="line">at java.lang.reflect.Method.invoke(Method.java:<span class="number">497</span>)</div><div class="line">at com.intellij.rt.execution.application.AppMain.main(AppMain.java:<span class="number">144</span>)</div><div class="line">Caused by: java.lang.ClassNotFoundException: org.apache.spark.SparkConf</div><div class="line">at java.net.URLClassLoader.findClass(URLClassLoader.java:<span class="number">381</span>)</div><div class="line">at java.lang.ClassLoader.loadClass(ClassLoader.java:<span class="number">424</span>)</div><div class="line">at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:<span class="number">331</span>)</div><div class="line">at java.lang.ClassLoader.loadClass(ClassLoader.java:<span class="number">357</span>)</div><div class="line">... <span class="number">7</span> more</div><div class="line"></div><div class="line">Process finished with exit code <span class="number">1</span></div></pre></td></tr></table></figure><p>这是为什么呢？原因是我们在 <code>build.sbt</code> 中配置的 spark 依赖是这样的：</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">libraryDependencies += <span class="string">"org.apache.spark"</span> % <span class="string">"spark-core_2.10"</span> % <span class="string">"1.6.1"</span> % <span class="string">"provided"</span></div></pre></td></tr></table></figure><p>注意到后面的 <code>provided</code> 了吗？这个代表打包或者运行的时候不会将这个 jar 包的文件包含进去（注意：spark app 要求这样，注意不要把spark相关的jar包包含进去）。这样导致我们无法再 idea 中调试或者运行 spark app。</p><p>解决方案还是有的，sbt 和 maven（也是一个项目管理的软件）一样，提供了模块开发功能，我们定义两个模块，一个模块就是我们上面我们做好的，另一个是用来运行的，这个里面包含了运行时类库，配置如下：</p><ol><li>创建一个名为 <code>main</code> 的文件夹，把项目中的 <code>src</code> 文件夹移动到这个目录下</li><li>在项目根目录下创建名为 <code>run</code> 的文件夹</li><li><p>修改项目根目录下的 <code>build.sbt</code> 文件，内容为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">name := &quot;spark-sbt-demo&quot;</div><div class="line"></div><div class="line">version := &quot;1.0&quot;</div><div class="line"></div><div class="line">scalaVersion := &quot;2.10.4&quot;</div><div class="line"></div><div class="line">organization := &quot;spark.demo&quot;</div><div class="line"></div><div class="line">version := &quot;1.0.0-SNAPSHOT&quot;</div><div class="line"></div><div class="line">libraryDependencies += &quot;org.apache.spark&quot; % &quot;spark-core_2.10&quot; % &quot;1.6.1&quot; % &quot;provided&quot;</div><div class="line"></div><div class="line">lazy val root = (project in file(&quot;.&quot;)).aggregate(main, run)</div><div class="line"></div><div class="line">lazy val main = (project in file(&quot;main&quot;))</div><div class="line"></div><div class="line">lazy val run = (project in file(&quot;run&quot;)).dependsOn(main)</div></pre></td></tr></table></figure></li><li><p>在子项目 <code>main</code> 创建 <code>build.sbt</code> 内容为：</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">libraryDependencies += <span class="string">"org.apache.spark"</span> % <span class="string">"spark-core_2.10"</span> % <span class="string">"1.6.1"</span> % <span class="string">"provided"</span></div></pre></td></tr></table></figure></li><li><p>在子项目 <code>run</code> 创建 <code>build.sbt</code> 内容为 ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">libraryDependencies += &quot;org.apache.spark&quot; % &quot;spark-core_2.10&quot; % &quot;1.6.1&quot;</div></pre></td></tr></table></figure></li><li><p>配置运行参数，如下图：<br><img src="/images/scala/idea-spark-run-config.png" alt="idea-spark-run-config"><br>然后选择上面的运行配置，运行即可。这里可能会碰到一个异常：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Exception in thread <span class="string">"main"</span> org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: file:/Users/du/workspace/hekr/spark-sbt-demo/src/main/scala/WorldCount.scala</div><div class="line">at org.apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:<span class="number">251</span>)</div><div class="line">at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:<span class="number">270</span>)</div><div class="line">......</div></pre></td></tr></table></figure></li></ol><p>这是由于上面我们修改了改程序main文件的位置，导致找不到该文件所致，请自行设置为一个存在的文件路径或者修改为 <code>main/src/main/scala/WorldCount.scala</code> 重新运行即可成功。</p><h2 id="Sbt-本地依赖库存储位置配置"><a href="#Sbt-本地依赖库存储位置配置" class="headerlink" title="Sbt 本地依赖库存储位置配置"></a>Sbt 本地依赖库存储位置配置</h2><p>抽空再补上，其实就是建立一个连接，先自行思考方案。</p><h1 id="项目下载"><a href="#项目下载" class="headerlink" title="项目下载"></a>项目下载</h1><p>没有源码下载的都是耍流氓，<a href="/files/spark-sbt-demo.tar.gz">点这里下载</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java-环境配置&quot;&gt;&lt;a href=&quot;#Java-环境配置&quot; class=&quot;headerlink&quot; title=&quot;Java 环境配置&quot;&gt;&lt;/a&gt;Java 环境配置&lt;/h1&gt;&lt;p&gt;这个就不多说了，这是前提条件，请自行安装后配置正确，如果不清楚请自行搜索 &lt;stro
      
    
    </summary>
    
      <category term="spark" scheme="http://yoursite.com/categories/spark/"/>
    
    
      <category term="spark" scheme="http://yoursite.com/tags/spark/"/>
    
      <category term="scala" scheme="http://yoursite.com/tags/scala/"/>
    
  </entry>
  
  <entry>
    <title>JDK多版本管理</title>
    <link href="http://yoursite.com/2016/04/20/java/JDK%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/"/>
    <id>http://yoursite.com/2016/04/20/java/JDK多版本管理/</id>
    <published>2016-04-20T01:43:43.000Z</published>
    <updated>2017-11-04T08:30:45.784Z</updated>
    
    <content type="html"><![CDATA[<p>在实际工作环境中经常碰到不同项目要用不同jdk版本问题，比如我的项目组现在用的是jdk8，而用spark打包的应用是用的jdk7，所以有必要记录一下版本配置和切换问题。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在实际工作环境中经常碰到不同项目要用不同jdk版本问题，比如我的项目组现在用的是jdk8，而用spark打包的应用是用的jdk7，所以有必要记录一下版本配置和切换问题。&lt;/p&gt;

      
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="jdk" scheme="http://yoursite.com/tags/jdk/"/>
    
  </entry>
  
  <entry>
    <title>通过SpringXD将信息分片|文件夹存储到HDFS</title>
    <link href="http://yoursite.com/2016/03/16/spring/%E9%80%9A%E8%BF%87SpringXD%E5%B0%86%E4%BF%A1%E6%81%AF%E5%88%86%E7%89%87-%E6%96%87%E4%BB%B6%E5%A4%B9%E5%AD%98%E5%82%A8%E5%88%B0HDFS/"/>
    <id>http://yoursite.com/2016/03/16/spring/通过SpringXD将信息分片-文件夹存储到HDFS/</id>
    <published>2016-03-16T09:29:03.000Z</published>
    <updated>2017-11-04T08:30:45.791Z</updated>
    
    <content type="html"><![CDATA[<pre><code>kafka --topic=kafka_test --zkconnect=10.10.1.20:2181 --queueSize=64 |hdfs --inputType=application/json --idleTimeout=10000 --partitionPath=dateFormat(&apos;yyyy/MM/dd/HH/mm&apos;)</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;pre&gt;&lt;code&gt;kafka --topic=kafka_test --zkconnect=10.10.1.20:2181 --queueSize=64 |hdfs --inputType=application/json --idleTimeout=10000 --part
      
    
    </summary>
    
      <category term="spring" scheme="http://yoursite.com/categories/spring/"/>
    
    
      <category term="hdfs" scheme="http://yoursite.com/tags/hdfs/"/>
    
      <category term="spring xd" scheme="http://yoursite.com/tags/spring-xd/"/>
    
      <category term="kafka" scheme="http://yoursite.com/tags/kafka/"/>
    
  </entry>
  
  <entry>
    <title>sparkApp提交到SpringXD出现错误可能情况及解决方法</title>
    <link href="http://yoursite.com/2016/03/16/spark/sparkApp%E6%8F%90%E4%BA%A4%E5%88%B0SpringXD%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF%E5%8F%AF%E8%83%BD%E6%83%85%E5%86%B5%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <id>http://yoursite.com/2016/03/16/spark/sparkApp提交到SpringXD出现错误可能情况及解决方法/</id>
    <published>2016-03-16T03:52:19.000Z</published>
    <updated>2017-11-04T08:30:45.788Z</updated>
    
    <content type="html"><![CDATA[<p>编写spark代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.demo;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</div><div class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</div><div class="line"><span class="keyword">import</span> org.apache.spark.SparkConf;</div><div class="line"><span class="keyword">import</span> org.apache.spark.api.java.JavaPairRDD;</div><div class="line"><span class="keyword">import</span> org.apache.spark.api.java.JavaRDD;</div><div class="line"><span class="keyword">import</span> org.apache.spark.api.java.JavaSparkContext;</div><div class="line"><span class="keyword">import</span> org.apache.spark.api.java.function.FlatMapFunction;</div><div class="line"><span class="keyword">import</span> org.apache.spark.api.java.function.Function2;</div><div class="line"><span class="keyword">import</span> org.apache.spark.api.java.function.PairFunction;</div><div class="line"><span class="keyword">import</span> scala.Tuple2;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Created by sdvdxl on 2016/3/14.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SparkCalcDemo</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String HADOOP_URL = <span class="string">"hdfs://10.10.1.110:8020/"</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        SparkConf conf = <span class="keyword">new</span> SparkConf().setAppName(<span class="string">"test"</span>).setMaster(<span class="string">"local[1]"</span>);</div><div class="line">        JavaSparkContext sc = <span class="keyword">new</span> JavaSparkContext(conf);</div><div class="line">        JavaRDD&lt;String&gt; textFile = sc.textFile(HADOOP_URL + <span class="string">"/xd/dataset1/2016/03/14/15/01"</span>, <span class="number">1</span>);</div><div class="line">        JavaRDD&lt;String&gt; words = textFile.flatMap(<span class="keyword">new</span> FlatMapFunction&lt;String, String&gt;() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> Iterable&lt;String&gt; <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">                List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line"></div><div class="line">                JSONObject jobj = JSON.parseObject(<span class="keyword">new</span> String(org.apache.commons.codec.binary.Base64.decodeBase64(s.substring(<span class="number">1</span>, s.length() - <span class="number">1</span>))));</div><div class="line">                list.add(jobj.getString(<span class="string">"name"</span>));</div><div class="line">                list.add(jobj.getString(<span class="string">"random"</span>));</div><div class="line">                <span class="keyword">return</span> list;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        JavaPairRDD&lt;String, Integer&gt; pairs = words.mapToPair(<span class="keyword">new</span> PairFunction&lt;String, String, Integer&gt;() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> Tuple2&lt;String, Integer&gt; <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(s, <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        JavaPairRDD&lt;String, Integer&gt; counts = pairs.reduceByKey(<span class="keyword">new</span> Function2&lt;Integer, Integer, Integer&gt;() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">(Integer a, Integer b)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> a + b;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        counts.foreach(tuple2 -&gt;</div><div class="line">                System.out.println(tuple2._1 + <span class="string">" : "</span> + tuple2._2));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>pom依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>kafka-demo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kafka-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--&lt;exclusions&gt;</span></div><div class="line"><span class="comment">&lt;exclusion&gt;</span></div><div class="line"><span class="comment">&lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;</span></div><div class="line"><span class="comment">&lt;artifactId&gt;jackson-module-scala_2.10&lt;/artifactId&gt;</span></div><div class="line"><span class="comment">&lt;/exclusion&gt;</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">&lt;/exclusions&gt;--&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--dependency&gt;</span></div><div class="line"><span class="comment">&lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;</span></div><div class="line"><span class="comment">&lt;artifactId&gt;jackson-module-scala_2.10&lt;/artifactId&gt;</span></div><div class="line"><span class="comment">&lt;version&gt;2.7.2&lt;/version&gt;</span></div><div class="line"><span class="comment">&lt;/dependency&gt;--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.camel<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>camel-base64<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.16.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/lib<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">excludeTransitive</span>&gt;</span>false<span class="tag">&lt;/<span class="name">excludeTransitive</span>&gt;</span> <span class="comment">&lt;!-- 表示是否不包含间接依赖的包 --&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">stripVersion</span>&gt;</span>false<span class="tag">&lt;/<span class="name">stripVersion</span>&gt;</span> <span class="comment">&lt;!-- 去除版本信息 --&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line"></div><div class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                            <span class="comment">&lt;!-- 拷贝项目依赖包到lib/目录下 --&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/lib<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">excludeTransitive</span>&gt;</span>false<span class="tag">&lt;/<span class="name">excludeTransitive</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">stripVersion</span>&gt;</span>false<span class="tag">&lt;/<span class="name">stripVersion</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line"></div><div class="line">            <span class="comment">&lt;!-- 项目资源插件 --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></div><div class="line">                            <span class="comment">&lt;!-- 拷贝项目src/main/resources/下，除.bat以外的所有文件到conf/目录下 --&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/conf<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">                                <span class="tag">&lt;<span class="name">resource</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources/<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></div><div class="line">                                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>*.bat<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></div><div class="line">                                <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-command<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></div><div class="line">                            <span class="comment">&lt;!-- 只拷贝项目src/main/resources/目录下的.bat文件到输出目录下 --&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">                                <span class="tag">&lt;<span class="name">resource</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources/<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;<span class="name">includes</span>&gt;</span></div><div class="line">                                        <span class="tag">&lt;<span class="name">include</span>&gt;</span>*.bat<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></div><div class="line">                                <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line"></div><div class="line">            <span class="comment">&lt;!-- 打包插件 --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">archive</span>&gt;</span></div><div class="line">                        <span class="comment">&lt;!-- 生成MANIFEST.MF的设置 --&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></div><div class="line">                            <span class="comment">&lt;!-- 为依赖包添加路径, 这些路径会写在MANIFEST文件的Class-Path下 --&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">addClasspath</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addClasspath</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">classpathPrefix</span>&gt;</span>lib/<span class="tag">&lt;/<span class="name">classpathPrefix</span>&gt;</span></div><div class="line">                            <span class="comment">&lt;!-- jar启动入口类--&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.some.package.some.class.Main<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">manifestEntries</span>&gt;</span></div><div class="line">                            <span class="comment">&lt;!-- 在Class-Path下添加配置文件的路径 --&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">Class-Path</span>&gt;</span>conf/<span class="tag">&lt;/<span class="name">Class-Path</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">manifestEntries</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">includes</span>&gt;</span></div><div class="line">                        <span class="comment">&lt;!-- 打jar包时，只打包class文件 --&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.class<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>oschina<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.oschina.net/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>mavenspring<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.springframework.org/release<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>jcenter<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://jcenter.bintray.com<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-release<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Releases<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/libs-release<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Snapshots<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/snapshot<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">releases</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">releases</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure><p>定义xd job:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">job create --name sparkAppDemo --definition &quot;sparkapp --mainClass=com.demo.SparkCalcDemo --appJar=/home/spark/spark-app.jar --master=local[1]&quot; --deploy</div></pre></td></tr></table></figure><p>加载job</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">job launch sparkAppDemo</div></pre></td></tr></table></figure><p>然后出现以下类似的错误，主要是：<code>...redis:queue-inbound-channel-adapter...</code>错误</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">2016-03-16T10:16:10+0800 1.3.1.RELEASE INFO DeploymentSupervisor-0 zk.ZKJobDeploymentHandler - Deployment status for job &apos;sparkAppDemo&apos;: DeploymentStatus&#123;state=deployed&#125;</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark application &apos;com.demo.SparkCalcDemo&apos; finished with exit code: 1</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: Exception in thread &quot;main&quot; java.lang.SecurityException: Invalid signature file digest for Manifest main attributes</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.security.util.SignatureFileVerifier.processImpl(SignatureFileVerifier.java:284)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.security.util.SignatureFileVerifier.process(SignatureFileVerifier.java:238)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.util.jar.JarVerifier.processEntry(JarVerifier.java:316)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.util.jar.JarVerifier.update(JarVerifier.java:228)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.util.jar.JarFile.initializeVerifier(JarFile.java:383)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.util.jar.JarFile.getInputStream(JarFile.java:450)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.JarIndex.getJarIndex(JarIndex.java:137)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:839)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:831)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.security.AccessController.doPrivileged(Native Method)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.URLClassPath$JarLoader.ensureOpen(URLClassPath.java:830)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.URLClassPath$JarLoader.&lt;init&gt;(URLClassPath.java:803)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.URLClassPath$3.run(URLClassPath.java:530)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.URLClassPath$3.run(URLClassPath.java:520)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.security.AccessController.doPrivileged(Native Method)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.URLClassPath.getLoader(URLClassPath.java:519)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.URLClassPath.getLoader(URLClassPath.java:492)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.URLClassPath.getNextLoader(URLClassPath.java:457)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at sun.misc.URLClassPath.getResource(URLClassPath.java:211)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.net.URLClassLoader$1.run(URLClassLoader.java:365)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.net.URLClassLoader$1.run(URLClassLoader.java:362)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.security.AccessController.doPrivileged(Native Method)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.net.URLClassLoader.findClass(URLClassLoader.java:361)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.lang.ClassLoader.loadClass(ClassLoader.java:424)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.lang.ClassLoader.loadClass(ClassLoader.java:357)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.lang.Class.forName0(Native Method)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at java.lang.Class.forName(Class.java:348)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:538)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:166)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:189)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:110)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)</div><div class="line">2016-03-16T10:16:14+0800 1.3.1.RELEASE ERROR inbound.job:sparkAppDemo-redis:queue-inbound-channel-adapter1 tasklet.SparkTasklet - Spark Logger: Using Spark&apos;s default log4j profile: org/apache/spark/log4j-defaults.properties</div></pre></td></tr></table></figure><p>仔细看的话，在上面有一句<code>Exception in thread &quot;main&quot; java.lang.SecurityException: Invalid signature file digest for Manifest main attributes</code>错误，这个错误是由于导出的jar包结构信息不正确导致的。用eclipse的导出runnable jar 功能导出的jar包就没问题了。</p><p>另外如果有依赖的jar包没哟被加载进去，则会在最上方出现<code>java.lang.NoClassDefFoundError:</code>类似信息。</p><p>相关资料：<a href="http://www.todu.top/2016/03/09/以分布式方式运行Spring-XD" target="_blank" rel="external">以分布式方式运行Spring-XD</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;编写spark代码：&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div c
      
    
    </summary>
    
      <category term="spring" scheme="http://yoursite.com/categories/spring/"/>
    
    
      <category term="spark" scheme="http://yoursite.com/tags/spark/"/>
    
      <category term="spring xd" scheme="http://yoursite.com/tags/spring-xd/"/>
    
  </entry>
  
  <entry>
    <title>linux下根据端口号查询对应进程</title>
    <link href="http://yoursite.com/2016/03/15/linux/linux%E4%B8%8B%E6%A0%B9%E6%8D%AE%E7%AB%AF%E5%8F%A3%E5%8F%B7%E6%9F%A5%E8%AF%A2%E5%AF%B9%E5%BA%94%E8%BF%9B%E7%A8%8B/"/>
    <id>http://yoursite.com/2016/03/15/linux/linux下根据端口号查询对应进程/</id>
    <published>2016-03-15T10:22:37.000Z</published>
    <updated>2017-11-04T08:30:45.786Z</updated>
    
    <content type="html"><![CDATA[<p>适用于ip4</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -Pnl +M -i4 | grep port</div></pre></td></tr></table></figure><p>适用于ip6</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -Pnl +M -i6 | grep port</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;适用于ip4&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="端口" scheme="http://yoursite.com/tags/%E7%AB%AF%E5%8F%A3/"/>
    
      <category term="进程" scheme="http://yoursite.com/tags/%E8%BF%9B%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>golang打印错误栈信息</title>
    <link href="http://yoursite.com/2016/03/15/golang/golang%E6%89%93%E5%8D%B0%E9%94%99%E8%AF%AF%E6%A0%88%E4%BF%A1%E6%81%AF/"/>
    <id>http://yoursite.com/2016/03/15/golang/golang打印错误栈信息/</id>
    <published>2016-03-15T10:21:05.000Z</published>
    <updated>2017-11-04T08:30:45.778Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mainimport (</div><div class="line">    <span class="string">"runtime"</span></div><div class="line">    <span class="string">"fmt"</span>)<span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    outer()&#125;<span class="function"><span class="keyword">func</span> <span class="title">outer</span><span class="params">()</span></span> &#123;</div><div class="line">    inner()&#125;<span class="function"><span class="keyword">func</span> <span class="title">inner</span><span class="params">()</span></span> &#123;</div><div class="line"></div><div class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</div><div class="line">            trace := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">1024</span>)</div><div class="line">            count := runtime.Stack(trace, <span class="literal">true</span>)</div><div class="line">            fmt.Printf(<span class="string">"Recover from panic: %s\n"</span>, err)</div><div class="line">            fmt.Printf(<span class="string">"Stack of %d bytes: %s\n"</span>, count, trace)</div><div class="line">        &#125;</div><div class="line">    &#125;()</div><div class="line"></div><div class="line">    <span class="built_in">panic</span>(<span class="string">"Fake error!"</span>)&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight go&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;
      
    
    </summary>
    
      <category term="golang" scheme="http://yoursite.com/categories/golang/"/>
    
    
      <category term="golang" scheme="http://yoursite.com/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>golang容易忽略导致入坑的方面</title>
    <link href="http://yoursite.com/2016/03/15/golang/golang%E5%AE%B9%E6%98%93%E5%BF%BD%E7%95%A5%E5%AF%BC%E8%87%B4%E5%85%A5%E5%9D%91%E7%9A%84%E6%96%B9%E9%9D%A2/"/>
    <id>http://yoursite.com/2016/03/15/golang/golang容易忽略导致入坑的方面/</id>
    <published>2016-03-15T10:19:19.000Z</published>
    <updated>2017-11-04T08:30:45.778Z</updated>
    
    <content type="html"><![CDATA[<h1 id="main-函数"><a href="#main-函数" class="headerlink" title="main 函数"></a>main 函数</h1><p>main函数必须定义在main包里，不可导出。当main函数调用完毕，程序就会立即退出，不会等待运行中的goroutine运行完毕。</p><h1 id="初始化函数"><a href="#初始化函数" class="headerlink" title="初始化函数"></a>初始化函数</h1><p><code>func init() { … }</code></p><p>此函数无参，不需显示调用。</p><p>此函数根据依赖顺序执行初始化顺序，并且是顺序执行，如：</p><p>A 依赖 B， B 依赖 C，并且A，B，C 都有init函数，那么初始化顺序是C ，B ， A</p><h1 id="iota"><a href="#iota" class="headerlink" title="iota"></a>iota</h1><ul><li><p>iota 只能用在const定义的常量上</p></li><li><p>iota在一个const范围，不管中间的变量有没有用到iota，iota都是持续递增加1的，如</p></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> (</div><div class="line"></div><div class="line">       aa = <span class="literal">iota</span></div><div class="line"></div><div class="line">       bb</div><div class="line"></div><div class="line">       cc = <span class="number">3</span></div><div class="line"></div><div class="line">       dd = <span class="literal">iota</span></div><div class="line"></div><div class="line">)</div></pre></td></tr></table></figure><p>dd 是3</p><ul><li>如果重新定义const，那么值会是重新从0开始，如</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> (</div><div class="line"></div><div class="line">       ee = <span class="literal">iota</span></div><div class="line"></div><div class="line">)</div></pre></td></tr></table></figure><h1 id="类型断言"><a href="#类型断言" class="headerlink" title="类型断言"></a>类型断言</h1><p>x.(T) x为变量， T为要判断的类型，其中有两种用法</p><ul><li><p><code>a := x.(T)</code> ，如果x是类型T的实现类型变量，那么可以得到转换后的值a，否则panic: interface conversion: (x的类型) is not package.T: missing method （T的方法）</p></li><li><p><code>a, ok := x.(T)</code>，如果x是类型T的实现的类型变量，那么ok为true， 转换成功，否则，ok为false，说明转换失败。</p></li></ul><h1 id="从Panic中恢复"><a href="#从Panic中恢复" class="headerlink" title="从Panic中恢复"></a>从Panic中恢复</h1><p>需要用到build-in recover()方法，函数原型：</p><p><code>func recover() interface{}</code></p><p>要捕获panic，必须在有可能发生panic的地方的上面进行处理，</p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line"> <span class="keyword">if</span> err := <span class="built_in">recover</span>(); err !=<span class="literal">nil</span> &#123;</div><div class="line"></div><div class="line">   <span class="comment">//处理错误</span></div><div class="line"></div><div class="line"> &#125;</div><div class="line"></div><div class="line">&#125;()</div></pre></td></tr></table></figure><p>一般来说，会将上面的代码放在函数（或者方法）的开始的地方。</p><p><strong> 注意 ， recover函数只能用在defer中，否则不会进行错误捕获。</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;main-函数&quot;&gt;&lt;a href=&quot;#main-函数&quot; class=&quot;headerlink&quot; title=&quot;main 函数&quot;&gt;&lt;/a&gt;main 函数&lt;/h1&gt;&lt;p&gt;main函数必须定义在main包里，不可导出。当main函数调用完毕，程序就会立即退出，不会等待运行
      
    
    </summary>
    
      <category term="golang" scheme="http://yoursite.com/categories/golang/"/>
    
    
      <category term="golang" scheme="http://yoursite.com/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>sink-hdfs</title>
    <link href="http://yoursite.com/2016/03/14/spring/sink-hdfs/"/>
    <id>http://yoursite.com/2016/03/14/spring/sink-hdfs/</id>
    <published>2016-03-14T08:10:23.000Z</published>
    <updated>2017-11-04T08:30:45.790Z</updated>
    
    <content type="html"><![CDATA[<p>hdfs根据时间自动划分文件夹<br><code>stream create --name dataset1 --definition &quot;kafka --topic=kafka_test --zkconnect=10.10.1.20:2181 --queueSize=64  |hdfs --inputType=application/json --idleTimeout=10000 --partitionPath=dateFormat(&#39;yyyy/MM/dd/HH/mm&#39;)&quot; --deploy</code><br>其中，–partitionPath=dateFormat(‘yyyy/MM/dd/HH/mm’)用来指定划分 策略，这个是说用年(四位)/月(两位)/天(2位)/时(2位)/分(2位)这种格式来划分</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;hdfs根据时间自动划分文件夹&lt;br&gt;&lt;code&gt;stream create --name dataset1 --definition &amp;quot;kafka --topic=kafka_test --zkconnect=10.10.1.20:2181 --queueSiz
      
    
    </summary>
    
      <category term="spring" scheme="http://yoursite.com/categories/spring/"/>
    
    
      <category term="hadoop" scheme="http://yoursite.com/tags/hadoop/"/>
    
      <category term="hdfs" scheme="http://yoursite.com/tags/hdfs/"/>
    
      <category term="spring xd" scheme="http://yoursite.com/tags/spring-xd/"/>
    
      <category term="spring" scheme="http://yoursite.com/tags/spring/"/>
    
  </entry>
  
  <entry>
    <title>golang命令</title>
    <link href="http://yoursite.com/2016/03/13/golang/golang%E5%91%BD%E4%BB%A4/"/>
    <id>http://yoursite.com/2016/03/13/golang/golang命令/</id>
    <published>2016-03-13T04:00:37.000Z</published>
    <updated>2017-11-04T08:30:45.777Z</updated>
    
    <content type="html"><![CDATA[<p>Go 提供了很多好用的命令，比如可以用go get 直接从网络上导入包，下面介绍一些常用的Go命令</p><h1 id="go-get"><a href="#go-get" class="headerlink" title="go get"></a>go get</h1><h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p>go get 命令用来直接下载并安装网络上的包到GOPATH中。事实上它依赖于版本控制工具，比如常用的Git和Mercurial。比如我们要使用<code>github.com/golang/text</code>这个包，那么可以执行命令 <code>go get github.com/golang/text</code>，稍后片刻（依照网络情况时间长短不一），那么这个包源码就会放到 <code>GOPATH/src</code>对应的目录下，编译好的文件会放到<code>GOPATH/pkg</code>对应的目录下，如果有可执行性代码，那么会将编译好的可执行性文件放到<code>GOPATH/bin</code>目录下。</p><h2 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h2><p>像刚才例子中提到的<code>github.com/golang/text</code>这个包下又有子包，也想get下来，该如何做呢？也许你想没办法，一个一个get吧，的确这是一个不错的方法，但是有一个更为高效和优雅的方式，那就是 <code>...</code>，这个符号代表旗下子目录，那我们可以这样操作<code>go get github.com/golang/text ...</code>，就可以将text和其子包同时get下来了。</p><h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><ul><li><code>-v</code> 可以显示正在get的包</li><li><code>-x</code> 可以显示正在执行的命令<h1 id="go-build"><a href="#go-build" class="headerlink" title="go build"></a>go build</h1>编译go文件。<br>可以切换到要build的包中执行<code>go build</code>，也可以直接 “go build” + “包名”，如要build包 <code>github.com/golang/text</code>，可以切换到text包目录下执行 <code>go build</code>，也可以直接执行 <code>go build github.com/golang/text</code>，这样就可以build text包了，如果要build子包，那么输入<code>go build ./...</code>。<code>build</code>命令会将main函数编译成可执行性文件，如果没有main，那么没有额外的文件产生。</li></ul><h1 id="go-clean"><a href="#go-clean" class="headerlink" title="go clean"></a>go clean</h1><p><code>clean</code>和<code>build</code>作用相反，是将build出来的可执行性文件清除掉。</p><h1 id="go-install"><a href="#go-install" class="headerlink" title="go install"></a>go install</h1><p><code>install</code> 命令是将包编译成二进制文件并放到<code>GOPATH/pkg/目标平台/</code>对应的目录下。比如我们自己从github上克隆了<code>github.com/golang/text</code>，要使用它的话，需要进入到text包中，然后执行 <code>go install</code>；加入有子包也要安装的话，输入<code>go install ./...</code>，就会在<code>GOPATH/pkg/目标平台/</code>产生后缀为<code>.a</code>的文件。当然也可以和build一样输入完整的包路径。</p><h1 id="go-list"><a href="#go-list" class="headerlink" title="go list"></a>go list</h1><p>这个命令用来查看所引用的包。</p><h2 id="基本用法-1"><a href="#基本用法-1" class="headerlink" title="基本用法"></a>基本用法</h2><ol><li>直接跟包名，如：<code>github.com/golang/text</code>，会打印这个包本身；也可以切换到该包目录下执行<code>go list</code>，效果相同。</li><li>可以直接跟”包名”+”/…”，比如要查看<code>github.com/golang/text</code>这个包的导入情况，执行<code>go list github.com/golang/text/...</code>会打印本包的go文件。<h2 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h2><code>-f</code>可以指定打印格式，默认是<code>go list -f &#39; {{.ImportPath}} &#39;</code>， <code>-f</code>后面的参数可以用下面结构体的属性：</li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">type</span> Package <span class="keyword">struct</span> &#123;</div><div class="line">    Dir           <span class="keyword">string</span> <span class="comment">// directory containing package sources</span></div><div class="line">    ImportPath    <span class="keyword">string</span> <span class="comment">// import path of package in dir</span></div><div class="line">    ImportComment <span class="keyword">string</span> <span class="comment">// path in import comment on package statement</span></div><div class="line">    Name          <span class="keyword">string</span> <span class="comment">// package name</span></div><div class="line">    Doc           <span class="keyword">string</span> <span class="comment">// package documentation string</span></div><div class="line">    Target        <span class="keyword">string</span> <span class="comment">// install path</span></div><div class="line">    Goroot        <span class="keyword">bool</span>   <span class="comment">// is this package in the Go root?</span></div><div class="line">    Standard      <span class="keyword">bool</span>   <span class="comment">// is this package part of the standard Go library?</span></div><div class="line">    Stale         <span class="keyword">bool</span>   <span class="comment">// would 'go install' do anything for this package?</span></div><div class="line">    Root          <span class="keyword">string</span> <span class="comment">// Go root or Go path dir containing this package</span></div><div class="line"></div><div class="line">    <span class="comment">// Source files</span></div><div class="line">    GoFiles        []<span class="keyword">string</span> <span class="comment">// .go source files (excluding CgoFiles, TestGoFiles, XTestGoFiles)</span></div><div class="line">    CgoFiles       []<span class="keyword">string</span> <span class="comment">// .go sources files that import "C"</span></div><div class="line">    IgnoredGoFiles []<span class="keyword">string</span> <span class="comment">// .go sources ignored due to build constraints</span></div><div class="line">    CFiles         []<span class="keyword">string</span> <span class="comment">// .c source files</span></div><div class="line">    CXXFiles       []<span class="keyword">string</span> <span class="comment">// .cc, .cxx and .cpp source files</span></div><div class="line">    MFiles         []<span class="keyword">string</span> <span class="comment">// .m source files</span></div><div class="line">    HFiles         []<span class="keyword">string</span> <span class="comment">// .h, .hh, .hpp and .hxx source files</span></div><div class="line">    SFiles         []<span class="keyword">string</span> <span class="comment">// .s source files</span></div><div class="line">    SwigFiles      []<span class="keyword">string</span> <span class="comment">// .swig files</span></div><div class="line">    SwigCXXFiles   []<span class="keyword">string</span> <span class="comment">// .swigcxx files</span></div><div class="line">    SysoFiles      []<span class="keyword">string</span> <span class="comment">// .syso object files to add to archive</span></div><div class="line"></div><div class="line">    <span class="comment">// Cgo directives</span></div><div class="line">    CgoCFLAGS    []<span class="keyword">string</span> <span class="comment">// cgo: flags for C compiler</span></div><div class="line">    CgoCPPFLAGS  []<span class="keyword">string</span> <span class="comment">// cgo: flags for C preprocessor</span></div><div class="line">    CgoCXXFLAGS  []<span class="keyword">string</span> <span class="comment">// cgo: flags for C++ compiler</span></div><div class="line">    CgoLDFLAGS   []<span class="keyword">string</span> <span class="comment">// cgo: flags for linker</span></div><div class="line">    CgoPkgConfig []<span class="keyword">string</span> <span class="comment">// cgo: pkg-config names</span></div><div class="line"></div><div class="line">    <span class="comment">// Dependency information</span></div><div class="line">    Imports []<span class="keyword">string</span> <span class="comment">// import paths used by this package</span></div><div class="line">    Deps    []<span class="keyword">string</span> <span class="comment">// all (recursively) imported dependencies</span></div><div class="line"></div><div class="line">    <span class="comment">// Error information</span></div><div class="line">    Incomplete <span class="keyword">bool</span>            <span class="comment">// this package or a dependency has an error</span></div><div class="line">    Error      *PackageError   <span class="comment">// error loading package</span></div><div class="line">    DepsErrors []*PackageError <span class="comment">// errors loading dependencies</span></div><div class="line"></div><div class="line">    TestGoFiles  []<span class="keyword">string</span> <span class="comment">// _test.go files in package</span></div><div class="line">    TestImports  []<span class="keyword">string</span> <span class="comment">// imports from TestGoFiles</span></div><div class="line">    XTestGoFiles []<span class="keyword">string</span> <span class="comment">// _test.go files outside package</span></div><div class="line">    XTestImports []<span class="keyword">string</span> <span class="comment">// imports from XTestGoFiles</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>如果想打印比较全的信息，也有一个参数可以使用：<code>-json</code>，这会将上面部分信息以json格式打印出来，读者可以自行实验。</p><h1 id="go-run"><a href="#go-run" class="headerlink" title="go run"></a>go run</h1><p>这个命令可以直接运行go文件（带main函数），不需要编译成二进制可执行性文件。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Go 提供了很多好用的命令，比如可以用go get 直接从网络上导入包，下面介绍一些常用的Go命令&lt;/p&gt;
&lt;h1 id=&quot;go-get&quot;&gt;&lt;a href=&quot;#go-get&quot; class=&quot;headerlink&quot; title=&quot;go get&quot;&gt;&lt;/a&gt;go get&lt;/h1&gt;
      
    
    </summary>
    
      <category term="golang" scheme="http://yoursite.com/categories/golang/"/>
    
    
      <category term="go" scheme="http://yoursite.com/tags/go/"/>
    
      <category term="golang" scheme="http://yoursite.com/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>Android通话自动录音</title>
    <link href="http://yoursite.com/2016/03/13/android/Android%E9%80%9A%E8%AF%9D%E8%87%AA%E5%8A%A8%E5%BD%95%E9%9F%B3/"/>
    <id>http://yoursite.com/2016/03/13/android/Android通话自动录音/</id>
    <published>2016-03-13T03:45:09.000Z</published>
    <updated>2017-11-04T08:30:45.772Z</updated>
    
    <content type="html"><![CDATA[<h1 id="应用介绍："><a href="#应用介绍：" class="headerlink" title="应用介绍："></a>应用介绍：</h1><p>通话自动录音，包括去电/来电接通录音。 启动服务之后，当电话接通之后开始录音, 录音文件保存在存储卡上My Record文件夹内。 同时可以用本软件进行查看录音文件，播放，删除等操作。 单击录音文件可以长按录音文件可以单个删除</p><h1 id="版本：1-5"><a href="#版本：1-5" class="headerlink" title="版本：1.5"></a>版本：1.5</h1><h1 id="百度应用地址"><a href="#百度应用地址" class="headerlink" title="百度应用地址"></a><a href="http://shouji.baidu.com/soft/item?docid=2357503&amp;from=web_alad_multi&amp;f=search_app_%E9%80%9A%E8%AF%9D%E8%87%AA%E5%8A%A8%E5%BD%95%E9%9F%B3%40list_1_title%401%40search_sug_app" target="_blank" rel="external">百度应用地址</a></h1><p><a href="http://shouji.baidu.com/s?wd=%E9%80%9A%E8%AF%9D%E8%87%AA%E5%8A%A8%E5%BD%95%E9%9F%B3&amp;data_type=app&amp;f=search_sug%40app&amp;from=web_alad_multi" target="_blank" rel="external">百度应用同类搜索占位为第一位</a></p><h1 id="应用截图"><a href="#应用截图" class="headerlink" title="应用截图"></a>应用截图</h1><p><img src="http://7xiyb7.com1.z0.glb.clouddn.com/worksandroid%E9%80%9A%E8%AF%9D%E8%87%AA%E5%8A%A8%E5%BD%95%E9%9F%B31.jpg" alt="android通话自动录音1"></p><p><img src="http://7xiyb7.com1.z0.glb.clouddn.com/worksandroid%E9%80%9A%E8%AF%9D%E8%87%AA%E5%8A%A8%E5%BD%95%E9%9F%B32.jpg" alt="android通话自动录音2"></p><p><img src="http://7xiyb7.com1.z0.glb.clouddn.com/worksandroid%E9%80%9A%E8%AF%9D%E8%87%AA%E5%8A%A8%E5%BD%95%E9%9F%B33.jpg" alt="android通话自动录音3"></p><p><img src="http://7xiyb7.com1.z0.glb.clouddn.com/worksandroid%E9%80%9A%E8%AF%9D%E8%87%AA%E5%8A%A8%E5%BD%95%E9%9F%B34.jpg" alt="android通话自动录音4"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;应用介绍：&quot;&gt;&lt;a href=&quot;#应用介绍：&quot; class=&quot;headerlink&quot; title=&quot;应用介绍：&quot;&gt;&lt;/a&gt;应用介绍：&lt;/h1&gt;&lt;p&gt;通话自动录音，包括去电/来电接通录音。 启动服务之后，当电话接通之后开始录音, 录音文件保存在存储卡上My Reco
      
    
    </summary>
    
      <category term="android" scheme="http://yoursite.com/categories/android/"/>
    
    
      <category term="android" scheme="http://yoursite.com/tags/android/"/>
    
      <category term="安卓" scheme="http://yoursite.com/tags/%E5%AE%89%E5%8D%93/"/>
    
      <category term="录音" scheme="http://yoursite.com/tags/%E5%BD%95%E9%9F%B3/"/>
    
  </entry>
  
  <entry>
    <title>linux工具集锦</title>
    <link href="http://yoursite.com/2016/03/13/linux/linux%E5%B7%A5%E5%85%B7%E9%9B%86%E9%94%A6/"/>
    <id>http://yoursite.com/2016/03/13/linux/linux工具集锦/</id>
    <published>2016-03-13T03:44:10.000Z</published>
    <updated>2017-11-04T08:30:45.786Z</updated>
    
    <content type="html"><![CDATA[<h1 id="bcompare"><a href="#bcompare" class="headerlink" title="bcompare"></a>bcompare</h1><p>Beyond Compare是一套超级的文件及文件夹(目录)的比较工具，不仅可以快速比较出两个目录的不同，还可以比较每个文件的内容，而且可以任意显示比较结果。程序内建了文件浏览器，方便您对文件、文件夹、压缩包、FTP网站之间的差异比对以及资料同步。使用它可以管理源代码，保持文件夹的同步，比较程序输出，及验证光盘的复制。它还支持脚本、插件，尤其对中文支持很好。</p><h1 id="Geany"><a href="#Geany" class="headerlink" title="Geany"></a>Geany</h1><h1 id="Evince"><a href="#Evince" class="headerlink" title="Evince"></a>Evince</h1><p>pdf阅读器</p><p>#Markdown 编辑器<br>Farbox</p><h1 id="tmux"><a href="#tmux" class="headerlink" title="tmux"></a>tmux</h1><p>一款可以在原有的终端上进行分屏工作的工具。</p><h1 id="mutate"><a href="#mutate" class="headerlink" title="mutate"></a>mutate</h1><p>类似 mac上的alfred的软件，<a href="https://github.com/qdore/Mutatehttps://github.com/qdore/Mutate" target="_blank" rel="external">地址</a><br>ppa安装方式<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo add-apt-repository ppa:mutate/ppa</div><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install mutate</div></pre></td></tr></table></figure></p><h1 id="plank"><a href="#plank" class="headerlink" title="plank"></a>plank</h1><p>一款友好实用的dock工具。</p><h1 id="virtualbox"><a href="#virtualbox" class="headerlink" title="virtualbox"></a>virtualbox</h1><p>一款跨平台的可以安装任何操作系统的虚拟机软件。<a href="https://www.virtualbox.org/" target="_blank" rel="external">官方地址</a>，同时最好安装扩展，可以有增强功能（拷贝，拖拽，更好的显示）。</p><h1 id="xfce-zhuti"><a href="#xfce-zhuti" class="headerlink" title="xfce zhuti"></a>xfce zhuti</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo add-apt-repository ppa:rebuntu16/other-stuff</div><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install xfce-theme-manager</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;bcompare&quot;&gt;&lt;a href=&quot;#bcompare&quot; class=&quot;headerlink&quot; title=&quot;bcompare&quot;&gt;&lt;/a&gt;bcompare&lt;/h1&gt;&lt;p&gt;Beyond Compare是一套超级的文件及文件夹(目录)的比较工具，不仅可以快速比较出两
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="软件" scheme="http://yoursite.com/tags/%E8%BD%AF%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>配置Idea的Go开发环境</title>
    <link href="http://yoursite.com/2016/03/13/golang/%E9%85%8D%E7%BD%AEIdea%E7%9A%84Go%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    <id>http://yoursite.com/2016/03/13/golang/配置Idea的Go开发环境/</id>
    <published>2016-03-13T03:43:19.000Z</published>
    <updated>2017-11-04T08:30:45.781Z</updated>
    
    <content type="html"><![CDATA[<h1 id="获取IDEA"><a href="#获取IDEA" class="headerlink" title="获取IDEA"></a>获取IDEA</h1><ol><li><a href="https://www.jetbrains.com/idea/download/" target="_blank" rel="external">最新版戳这里下载</a>，下载对应平台的版本，一般来说，社区版(Community Edition)就已经足够了。</li><li>安装IDEA。Windows和Mac是安装版，一步一步安装完成即可；Linux是免安装版，解压，给IDEA的执行文件添加可执行权限即可。假设安装目录是<code>H:\software\dev\JetBrains\IntelliJ IDEA Community Edition 14.1.1</code>，其他平台自行设置目录。</li></ol><h1 id="获取Go"><a href="#获取Go" class="headerlink" title="获取Go"></a>获取Go</h1><ol><li>Go的官方网站是<a href="http://golang.org/" target="_blank" rel="external">http://golang.org/</a>，<a href="https://golang.org/dl/" target="_blank" rel="external">下载地址</a>，但是鉴于中国网络问题，不科学上网则没法下载，各位同学可以从<a href="http://golangtc.com/download" target="_blank" rel="external">这里下载</a>，最好下载最新的，当然这个网站(<a href="http://golangtc.com/)本身就是国内较活跃的一个Go社区。" target="_blank" rel="external">http://golangtc.com/)本身就是国内较活跃的一个Go社区。</a></li><li>下载后解压到本地目录，假设安装目录是<code>H:\software\dev\go</code>。其他平台自行设置目录。</li></ol><h1 id="获取Git和hg"><a href="#获取Git和hg" class="headerlink" title="获取Git和hg"></a>获取Git和hg</h1><p>因为Go get命令要使用到git或者hg，所以需要安装git和hg。<br>git可以<a href="http://git-scm.com/" target="_blank" rel="external">从这里下载</a>, hg(执行命令是hg，实际下载的软件叫mercurial)可以<a href="http://mercurial.selenic.com/" target="_blank" rel="external">从这里下载</a>，加入git安装到<code>H:\software\dev\Git</code>，hg安装到<code>H:\software\dev\Mercurial</code></p><h1 id="配置Go和Git-hg"><a href="#配置Go和Git-hg" class="headerlink" title="配置Go和Git(hg)"></a>配置Go和Git(hg)</h1><p>配置环境变量，这里以Windows为例，其他平台请自行换成对应的路径即可。如果打开命令行分别执行以下命令都成功，那么不需要额外配置环境变量，否则配置对应的环境变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">go version</div><div class="line">git version</div><div class="line">hg version</div></pre></td></tr></table></figure></p><table><thead><tr><th>变量名称</th><th>变量值</th><th>说明</th></tr></thead><tbody><tr><td>GOROOT</td><td>H:\software\dev\go</td><td>go根路径</td></tr><tr><td>GOPATH</td><td>H:\software\dev\gopath</td><td>gopath可以是任何一个目录</td></tr><tr><td>PATH</td><td>%PATH%;%GOROOT%\bin;H:\software\dev\Git\bin;H:\software\dev\Mercuria;</td><td>注意不要忘了加入原来的path变量</td></tr></tbody></table><h1 id="配置IDEA的Go环境"><a href="#配置IDEA的Go环境" class="headerlink" title="配置IDEA的Go环境"></a>配置IDEA的Go环境</h1><ol><li><p>打开IDEA，File -&gt; Settings -&gt; Plugins -&gt; Browse repositiores… -&gt; Manage repositories… ，添加自定义repository url <code>https://plugins.jetbrains.com/plugins/nightly/list</code>(nightly build)或者 <code>https://plugins.jetbrains.com/plugins/alpha/list</code>(alpha version)，添加完成之后，等待刷新完成后，输入go，选择go插件，点击安装，等待安装完成后，重启生效。网络环境不好的话，可能插件不能下载，可以直接<a href="https://plugins.jetbrains.com/plugin/download?updateId=19402" target="_blank" rel="external">去idea官网下载插件</a>，如何获取最新插件呢，这里是根据updateId来的，这个最新的id就是从上面的repository的url中获取的，用浏览器打开这个url，就会观察到以下内容</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">idea-plugin</span> <span class="attr">downloads</span>=<span class="string">"97922"</span> <span class="attr">size</span>=<span class="string">"1071401"</span> <span class="attr">date</span>=<span class="string">"1428797441000"</span> <span class="attr">url</span>=<span class="string">""</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>Go<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>ro.redeul.google.go<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">description</span>&gt;</span></div><div class="line">&lt;![CDATA[</div><div class="line">Support for Go programming language. &lt;p&gt;Alpha pre-release of the 1.0.0 version.&lt;/p&gt; &lt;p&gt;Doesn't contain all the functionality of the 0.9.x branch but has a completely reworked internals. It's faster than 0.9.x, refactoring works to some degree and has native support for gopath packages.&lt;/p&gt; Compatibility &lt;p&gt;Plugin can be installed on IntelliJ platform 141.2 or greater. It corresponds to IntelliJ IDEA 14.1, WebStorm 10, PhpStorm 9&lt;/p&gt;</div><div class="line">]]&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">description</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.271<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">vendor</span> <span class="attr">email</span>=<span class="string">""</span> <span class="attr">url</span>=<span class="string">"https://github.com/go-lang-plugin-org"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">download-url</span>&gt;</span>../../plugin/download?updateId=19402<span class="tag">&lt;/<span class="name">download-url</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">idea-version</span> <span class="attr">min</span>=<span class="string">"n/a"</span> <span class="attr">max</span>=<span class="string">"n/a"</span> <span class="attr">until-build</span>=<span class="string">"3999"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">change-notes</span>&gt;</span></div><div class="line">&lt;![CDATA[</div><div class="line">&lt;ul&gt; &lt;li&gt;Initial GAE support: running dev server. &lt;strong&gt;Requires resetting project SDK.&lt;/strong&gt;&lt;/li&gt; &lt;/ul&gt;</div><div class="line">]]&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">change-notes</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">rating</span>&gt;</span>4.3<span class="tag">&lt;/<span class="name">rating</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">idea-plugin</span>&gt;</span></div></pre></td></tr></table></figure></li></ol><p>其中 download-url 中的 updateId 就是最新的下载id。<br>如果还是没法下载，那么<a href="http://pan.baidu.com/s/1c0o50ys" target="_blank" rel="external">请点击这里</a>，从百度云上下载。<br>然后 File -&gt; Settings -&gt; Install plugin from disk…选择刚才下载的压缩包（不要解压），确定后重启成效。</p><ol><li>File -&gt; Other settings -&gt; Default Project Structure… -&gt; Platform Settings -&gt; SDKs -&gt; + -&gt; Go SDK -&gt; 选择GOROOT路径，确定。</li><li><p>File -&gt; New Project -&gt; Go -&gt; Next -&gt; 输入Project name和Project location -&gt; Finish -&gt; 在项目根目录中新建main.go，添加以下内容</p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">package</span> main</div><div class="line">    <span class="keyword">import</span> (</div><div class="line"><span class="string">"fmt"</span></div><div class="line">)</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">fmt.Println(<span class="string">"hello world"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ol><p>Run -&gt; Edit Configrations -&gt; + -&gt; Go Application -&gt; File 中在原来的路径基础上添加main文件即 添加 <code>\main.go</code>，点击确定，然后运行可以看到控制台打印 hello world。</p><h1 id="配置GDB-debug"><a href="#配置GDB-debug" class="headerlink" title="配置GDB debug"></a>配置GDB debug</h1><p>Run -&gt; Edit Configrations -&gt; Defaults -&gt; Go GDB -&gt;<br>Name：可以随便填写<br>GDB executeable：dbg.exe的完整路径<br>Application executable：填写生成的可执行文件的完整路径，路径要是windows写法，如G:\gopath\src\example\main.exe则需要两个反斜杠，就变成了G:\gopath\src\example\main.exe，或者是Unix写法 G:/gopath/src/example/main.exe,否则会提示找不到文件。这里的可执行文件必须使用<code>go build -gcflags &quot;-N -l&quot;</code>编译出来的，这样的文件带有debug信息并且没有被go内联优化。</p><h1 id="配置保存时自动格式化代码和自动导入"><a href="#配置保存时自动格式化代码和自动导入" class="headerlink" title="配置保存时自动格式化代码和自动导入"></a>配置保存时自动格式化代码和自动导入</h1><p>这个配置需要用到IDEA的宏（所谓的宏，就是一系列操作），下面就说怎么录制这个宏。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;获取IDEA&quot;&gt;&lt;a href=&quot;#获取IDEA&quot; class=&quot;headerlink&quot; title=&quot;获取IDEA&quot;&gt;&lt;/a&gt;获取IDEA&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://www.jetbrains.com/idea/download
      
    
    </summary>
    
      <category term="golang" scheme="http://yoursite.com/categories/golang/"/>
    
    
      <category term="go" scheme="http://yoursite.com/tags/go/"/>
    
      <category term="golang" scheme="http://yoursite.com/tags/golang/"/>
    
  </entry>
  
</feed>
